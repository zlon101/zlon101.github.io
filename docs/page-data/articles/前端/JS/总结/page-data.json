{"componentChunkName":"component---src-templates-post-js","path":"/articles/前端/JS/总结/","result":{"data":{"markdownRemark":{"fields":{"articlePath":"/articles/前端/JS/总结/"},"html":"<h1>页面生命周期</h1>\n<blockquote>\n<ul>\n<li>window.onload</li>\n<li>window.onunload</li>\n<li>window.onbeforeunload</li>\n<li>document.addEventListener(\"DOMContentLoaded\", fn);  DOMContentLoaded 只能用addEventListener监听</li>\n<li>document.addEventListener('readystatechange', fn);\n<ul>\n<li>对应 document.readyState 属性，取值：loading | interactive | complete</li>\n<li>Loading: html 加载中</li>\n<li>interactive: html加载完成, dom 解析完成，可以操作dom，但是js、图像等资源还在加载，触发 DOMContentLoaded 事件</li>\n<li>complete: 资源完全加载，触发 window.onload</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>参考 <a href=\"https://zh.javascript.info/onload-ondomcontentloaded\">javascript.info</a></p>\n</blockquote>\n<h1>viewport | 视口</h1>\n<blockquote>\n<ul>\n<li>缩放改变的是 <code>window.devicePixelRatio</code></li>\n<li>布局视窗可以通过<meta>标签设置viewport来修改。每个浏览器默认都会有一个设置，例如iOS，Android这些机型设置布局视窗宽度为980px，所以PC上的网页基本能在手机上呈现，只不过元素看上去很小，一般可以通过手指动双击缩放网页。</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>控制放大和缩小的就是视窗Viewport</p>\n</li>\n<li>\n<p>window.screen.width：获取屏幕的宽度，等于系统设置里面的屏幕分辨率，和页面没有关系（包括resize 、缩放）</p>\n</li>\n<li>\n<p>什么是 viewport 视口</p>\n<ul>\n<li>可视区域，不包含滚动之外的内容</li>\n<li>视口 === 布局视口 === document.documentElement.clientWidth</li>\n<li>layout viewport | visual viewport (布局视口)</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Viewport\">https://developer.mozilla.org/en-US/docs/Glossary/Viewport</a></li>\n</ul>\n</li>\n</ul>\n<h1>尺寸</h1>\n<blockquote>\n<ul>\n<li>getBoundingClientRect</li>\n<li><code>clientHeight offsetHeight scrollHeight</code></li>\n<li><code>document.documentElement</code> : 与 <code>&#x3C;html></code> 标签相对应的根文档元素</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p><code>clientHeight</code> 内容区域加内边距，不包含滚动条和 border，可用于内容的文档的可见部分的 width/heigh，<code>inline</code> 元素获取的 clientWidth 和 clientHeight 为 0 ；</p>\n</li>\n<li>\n<p><code>offsetWidth</code> 包含边框和滚动条的尺寸，不包含伪元素 (::before、::after)</p>\n</li>\n<li>\n<p><code>scrollHeight</code> 包含滚动隐藏尺寸，包含伪元素，如果元素没有溢出，该值等于 clientHeight</p>\n</li>\n<li>\n<p><code>window.innerWidth</code>: visual viewport 的宽度。页面缩放会影响该值，放大时值变小。</p>\n</li>\n<li>\n<p><code>window.outerWidth</code>: 整个浏览器窗口的尺寸，包含从标签页顶部的尺寸</p>\n</li>\n<li>\n<p>获取文档尺寸</p>\n<deckgo-highlight-code language=\"js\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">const scrollHeight = Math.max(\n  document.body.scrollHeight, document.documentElement.scrollHeight,\n  document.body.offsetHeight, document.documentElement.offsetHeight,\n  document.body.clientHeight, document.documentElement.clientHeight\n);</code>\n        </deckgo-highlight-code>\n</li>\n<li>\n<p><code>element.getBoundingClientRect()</code></p>\n<ul>\n<li>viewport 内(以可视区域的左上角为坐标原点)，盒模型左上角和右小脚的坐标（x, y）</li>\n<li>ie 不支持 element.getBoundingClientRect().x</li>\n</ul>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0af0c7d38022ec66861c3884bac8f339/ad997/image-20210702112944679.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 77%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACb0lEQVQ4y5WUC4+bOBSF8/9/0u5WlbZPrbadziSThDdkCAFDEhKwMQ/zVSHtqBlNpV2kT9ey0PG510eenZw3yOR+ok7uUNkSJdb/kxVN4VI6fzI7B+/om5Je7unqHKMrGAdMrzF9+x/RjONIHX9hdg7fYwZNr08MXYUMF9T7LUNzpFeHHxxf4fDMoPac9imn8COzyn8PjWasz5gspv78BtXqyeVPRtPfMlzqAGa8Akg9UG2/Mau8v2mPB/LIpwss1PIttVhxTpack8cJJexpRk3h0OQOTeEh0zmt8DGn4yRYS00Vf2VWbT5PG9dzoNm75ElEttux2z6RJjF91/Py62SOzhzG6vSL4B2zKvp0FTRmGqzOLbI4YBP6xJHPU+jhO2u2m5BN4OJZS5I4pq0FrXAZz78THM3VYW4RBxaR7xL5DvbyAd9e4dlLAtcicNeILEOf00mwDyyG2KM6nn7M8KWgsIj9NaFnE14EnPVzvbgNPYtcCOQxps09zI3Dr685tPHWC1zbwlmvCDwXz7ZYP86xV0tca0Wxv8bmZoaqpdq+0rISS/LonjSckwb37PxvpOHDVLNojtgs6OpLyxFq9YEhtBnMwFMYUW3+fSE4Ql9s6TKPXvh0wp9qn4f0eXBdC58289DWPwxlAWZAnkoKUSDsd7/e8jBhqpKxUYxKwiXgqr4OPo0Zm2baH3WDiX2MrKa4TSG/tH1p+eB/QHUgmxbZdEjdIztDrXuKsqasG2QlkUojW4NsB1Q3kogDfXubT5UumJXOX8h0Rb1bPCN3C87bBxLrI4fwy/Sa1LvHm3/KzR1yN7++TunjFLfS/oPvG1RtFeTMZYoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"image-20210702112944679\" title=\"image-20210702112944679\" src=\"/static/0af0c7d38022ec66861c3884bac8f339/5a190/image-20210702112944679.png\" srcset=\"/static/0af0c7d38022ec66861c3884bac8f339/772e8/image-20210702112944679.png 200w,\n/static/0af0c7d38022ec66861c3884bac8f339/e17e5/image-20210702112944679.png 400w,\n/static/0af0c7d38022ec66861c3884bac8f339/5a190/image-20210702112944679.png 800w,\n/static/0af0c7d38022ec66861c3884bac8f339/ad997/image-20210702112944679.png 1012w\" sizes=\"(max-width: 800px) 100vw, 800px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>    \n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\">https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CSS_Object_Model/Determining_the_dimensions_of_elements\">确定元素的尺寸-MDN</a></p>\n</li>\n<li>\n<p><code>getComputedStyle(ele)</code>  只读\n<code>getComputedStyle(ele).getPropertyValue('font-size')</code>  使用全称查询。\n<code>getComputedStyle($0)['font-size']</code></p>\n</li>\n</ul>\n<h2>元素位置</h2>\n<ul>\n<li>Element.clientTop/Element.clientLeft:  左/上边框的宽度</li>\n<li>Element.offsetTop:  元素的边框相对于最近的定位祖先元素的边框的距离</li>\n<li>Element.scrollTop:  元素内容区域滚动的距离</li>\n</ul>\n<h2>鼠标位置</h2>\n<ul>\n<li>event.pageY:  相对于页面左上角的垂直坐标</li>\n<li>event.clientY：相对于 viewport 左上角的垂直坐标</li>\n</ul>\n<h1>滚动</h1>\n<ul>\n<li>\n<p><code>window.pageYOffset</code>\n以左上角为坐标原点，页面水平、垂直滚动的距离，只读</p>\n</li>\n<li>\n<p><code>window.scrollBy()</code>  和 <code>window.scrollTo()</code>\n<code>window.scrollBy(x, y)</code> 相对于当前位置滚动，<code>window.scrollTo(x, y)</code> 相对于文档左上角滚动</p>\n</li>\n<li>\n<p><code>document.documentElement.scrollTop</code> 和 <code>document.body.scrollTop/Left</code>（safari）、<code>ele.scrollTop</code>\n垂直滚动距离，可读可写</p>\n</li>\n<li>\n<p><code>ele.scrollIntoView</code></p>\n</li>\n<li>\n<p>判断是否溢出</p>\n<deckgo-highlight-code language=\"js\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\"> ele.clientWidth &lt; ele.scrollWidth || ele.clientHeight &lt; ele.scrollHeight</code>\n        </deckgo-highlight-code>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"https://zh.javascript.info/size-and-scroll-window\">现代JS文档: size-and-scroll-window</a></p>\n<p><a href=\"https://www.runoob.com/jqueryui/example-resizable.html\">Jquery 拖拽 resize</a></p>\n</blockquote>\n<h1>本地存储</h1>\n<blockquote>\n<p><a href=\"https://zh.javascript.info/localstorage\">https://zh.javascript.info/localstorage</a></p>\n</blockquote>\n<h1>history</h1>\n<blockquote>\n<p>window.history.pushState | window.history.replaceState</p>\n<ul>\n<li>pushState 和 replaceState 都会修改当前页面url，当时不会立即加载url，之后可能会加载url。</li>\n<li>popstate事件只会在浏览器某些行为下触发， 比如点击后退、前进按钮(或者在JavaScript中调用history.back()、history.forward()、history.go()方法)。调用 history.pushState() 或者 history.replaceState() 不会触发 popstate 事件。</li>\n</ul>\n</blockquote>\n<h1>实现动画的方法</h1>\n<ol>\n<li>css:  transition animation</li>\n<li>js: setTimeout、setInterval、requestAnimationFrame</li>\n<li><strong>html5: canvas ?</strong></li>\n</ol>\n<p>参考:</p>\n<blockquote>\n<ul>\n<li><a href=\"https://threejs.org/examples/#webgl_decals\">三维动画库</a></li>\n<li><a href=\"https://www.cnblogs.com/coco1s/p/15009605.html\">带圆角的三角形-动画</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Basic_animations\">Animation</a></li>\n</ul>\n</blockquote>\n<h1>新增运算符</h1>\n<ul>\n<li><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Operators/Optional_chaining\">可选链 空值运算符</a></li>\n</ul>\n<h1>DOM操作</h1>\n<ul>\n<li>\n<p>监听DOM元素变化: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/observe\">MutationObserver</a></p>\n</li>\n<li>\n<p>监听DOM元素尺寸变化: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver\">ResizeObserver</a></p>\n<ul>\n<li><a href=\"https://github.com/juggle/resize-observer\">Polyfill</a></li>\n</ul>\n</li>\n<li>\n<p>监听DOM元素是否可见: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/IntersectionObserver\">IntersectionObserver</a></p>\n</li>\n</ul>","id":"18079b45-edc5-56df-9baa-b616e44e2f67","parent":{"name":"总结","base":"总结.md","mtime":"2022-09-07T04:15:03.264Z","sourceInstanceName":"markdown"}}},"pageContext":{"articlePath":"/articles/前端/JS/总结/"}},"staticQueryHashes":["3957182205"]}