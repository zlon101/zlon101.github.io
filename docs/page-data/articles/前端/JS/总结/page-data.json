{"componentChunkName":"component---src-templates-post-js","path":"/articles/å‰ç«¯/JS/æ€»ç»“/","result":{"data":{"markdownRemark":{"fields":{"articlePath":"/articles/å‰ç«¯/JS/æ€»ç»“/"},"html":"<h1>é¡µé¢ç”Ÿå‘½å‘¨æœŸ</h1>\n<ul>\n<li>\n<p>window.onload</p>\n</li>\n<li>\n<p>window.onunload</p>\n</li>\n<li>\n<p>window.onbeforeunload</p>\n</li>\n<li>\n<p>document.addEventListener(\"DOMContentLoaded\", fn);  DOMContentLoaded åªèƒ½ç”¨addEventListenerç›‘å¬</p>\n</li>\n<li>\n<p>document.addEventListener('readystatechange', fn);</p>\n<ul>\n<li>å¯¹åº” document.readyState å±æ€§ï¼Œå–å€¼ï¼šloading | interactive | complete</li>\n<li>Loading: html åŠ è½½ä¸­</li>\n<li>interactive: htmlåŠ è½½å®Œæˆ, dom è§£æå®Œæˆï¼Œå¯ä»¥æ“ä½œdomï¼Œä½†æ˜¯jsã€å›¾åƒç­‰èµ„æºè¿˜åœ¨åŠ è½½ï¼Œè§¦å‘ DOMContentLoaded äº‹ä»¶</li>\n<li>complete: èµ„æºå®Œå…¨åŠ è½½ï¼Œè§¦å‘ window.onload</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>å‚è€ƒ <a href=\"https://zh.javascript.info/onload-ondomcontentloaded\">javascript.info</a></p>\n</blockquote>\n<h1>viewport | è§†å£</h1>\n<p>ç¼©æ”¾æ”¹å˜çš„æ˜¯ <code>window.devicePixelRatio</code></p>\n<ul>\n<li>\n<p>å¸ƒå±€è§†å£ï¼šæ¸²æŸ“åé¡µé¢çš„å®é™…å¤§å°ï¼ŒåŒ…å«æ»šåŠ¨æƒ…å†µä¸‹æº¢å‡ºçš„åŒºåŸŸï¼Œé¡µé¢ç¼©æ”¾æ—¶ï¼ˆè°ƒæ•´ç¼©æ”¾çº§åˆ«ï¼‰å¤§å°ä¸å˜ã€‚</p>\n</li>\n<li>\n<p>å¯è§è§†å£ï¼šé¡µé¢å¯è§çš„éƒ¨åˆ†ï¼Œç¼©æ”¾æ—¶å°ºå¯¸ä¸å˜çš„éƒ¨åˆ†ï¼ˆåœ°å€æ ã€ä¹¦ç­¾æ ï¼‰éƒ½ä¸ç®—å¯è§è§†å£çš„åŒºåŸŸã€‚</p>\n<ul>\n<li>å¯è§è§†å£å¤§å°ä¸çª—å£å¤§å°å’Œç¼©æ”¾çº§åˆ«æœ‰å…³</li>\n<li>å¦‚ä½•è¯»å†™ï¼Ÿ</li>\n</ul>\n</li>\n</ul>\n<deckgo-highlight-code language=\"js\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">let pageWidth = window.innerWidth;\r\nlet pageHeight = window.innerHeight;\r\nif (typeof pageWidth !== &#39;number&#39;) {\r\n  if (document.compatMode === &#39;CSS1Compat&#39;) {\r\n    pageWidth = document.documentElement.clientWidth;\r\n    pageHeight = document.documentElement.clientHeight;\r\n  } else {\r\n    // æ··æ‚æ¨¡å¼\r\n    pageWidth = document.body.clientWidth;\r\n    pageHeight = document.body.clientHeight;\r\n  }\r\n}</code>\n        </deckgo-highlight-code>\n<ul>\n<li><code>window.screen.availHeight\\Width\\Left\\Top</code></li>\n<li>ç½‘é¡µç¼©æ”¾æ—¶å¸ƒå±€è§†å£ã€å¯è§è§†å£çš„å˜åŒ–ï¼Ÿ</li>\n<li><a href=\"https://zh.javascript.info/popup-windows#yi-dong-he-tiao-zheng-da-xiao\">https://zh.javascript.info/popup-windows#yi-dong-he-tiao-zheng-da-xiao</a></li>\n</ul>\n<blockquote>\n<p>æ—§æ–‡æ¡£</p>\n</blockquote>\n<ul>\n<li>\n<p>å¸ƒå±€è§†çª—å¯ä»¥é€šè¿‡ <code>&#x3C;meta></code> æ ‡ç­¾è®¾ç½® viewport æ¥ä¿®æ”¹ã€‚æ¯ä¸ªæµè§ˆå™¨é»˜è®¤éƒ½ä¼šæœ‰ä¸€ä¸ªè®¾ç½®ï¼Œä¾‹å¦‚iOSï¼ŒAndroidè¿™äº›æœºå‹è®¾ç½®å¸ƒå±€è§†çª—å®½åº¦ä¸º980pxï¼Œæ‰€ä»¥PCä¸Šçš„ç½‘é¡µåŸºæœ¬èƒ½åœ¨æ‰‹æœºä¸Šå‘ˆç°ï¼Œåªä¸è¿‡å…ƒç´ çœ‹ä¸Šå»å¾ˆå°ï¼Œä¸€èˆ¬å¯ä»¥é€šè¿‡æ‰‹æŒ‡åŠ¨åŒå‡»ç¼©æ”¾ç½‘é¡µã€‚</p>\n</li>\n<li>\n<p>æ§åˆ¶æ”¾å¤§å’Œç¼©å°çš„å°±æ˜¯è§†çª—Viewport</p>\n</li>\n<li>\n<p>window.screen.widthï¼šè·å–å±å¹•çš„å®½åº¦ï¼Œç­‰äºç³»ç»Ÿè®¾ç½®é‡Œé¢çš„å±å¹•åˆ†è¾¨ç‡ï¼Œå’Œé¡µé¢æ²¡æœ‰å…³ç³»ï¼ˆåŒ…æ‹¬resize ã€ç¼©æ”¾ï¼‰</p>\n</li>\n<li>\n<p>ä»€ä¹ˆæ˜¯ viewport è§†å£</p>\n<ul>\n<li>å¯è§†åŒºåŸŸï¼Œä¸åŒ…å«æ»šåŠ¨ä¹‹å¤–çš„å†…å®¹</li>\n<li>è§†å£ === å¸ƒå±€è§†å£ === document.documentElement.clientWidth</li>\n<li>layout viewport | visual viewport (å¸ƒå±€è§†å£)</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Viewport\">https://developer.mozilla.org/en-US/docs/Glossary/Viewport</a></li>\n</ul>\n</li>\n<li>\n<p><code>window.innerWidth</code>: visual viewport çš„å®½åº¦ã€‚é¡µé¢ç¼©æ”¾ä¼šå½±å“è¯¥å€¼ï¼Œæ”¾å¤§æ—¶å€¼å˜å°ã€‚</p>\n</li>\n<li>\n<p><code>window.outerWidth</code>: æ•´ä¸ªæµè§ˆå™¨çª—å£çš„å°ºå¯¸ï¼ŒåŒ…å«ä»æ ‡ç­¾é¡µé¡¶éƒ¨çš„å°ºå¯¸</p>\n</li>\n<li>\n<p>è·å–æ–‡æ¡£å°ºå¯¸</p>\n</li>\n</ul>\n<deckgo-highlight-code language=\"js\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">const scrollHeight = Math.max(\r\n  document.body.scrollHeight, document.documentElement.scrollHeight,\r\n  document.body.offsetHeight, document.documentElement.offsetHeight,\r\n  document.body.clientHeight, document.documentElement.clientHeight\r\n);</code>\n        </deckgo-highlight-code>\n<ul>\n<li>è·å–æµè§ˆå™¨è§†å£å¤§å°</li>\n</ul>\n<deckgo-highlight-code language=\"javascript\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">function getViewportSize() {\r\n  // æ··æ‚æ¨¡å¼\r\n  if (document.compatMode === &#39;BackCompat&#39;) {\r\n    return {\r\n      width: document.body.clientWidth,\r\n      height: document.body.clientHeight,\r\n    };\r\n  }\r\n  return {\r\n    width: document.documentElement.clientWidth,\r\n    height: document.documentElement.clientHeight,\r\n  }\r\n}</code>\n        </deckgo-highlight-code>\n<h1>DOMæ“ä½œ</h1>\n<h2>å…ƒç´ å°ºå¯¸</h2>\n<blockquote>\n<p>clientHeight  offsetHeight   scrollHeight</p>\n</blockquote>\n<p>clientWidthã€offsetWidthã€scrollWidth éƒ½æ˜¯åªè¯»å±æ€§ï¼Œè€Œä¸”æ¯æ¬¡è®¿é—®è¿™äº›å±æ€§æ—¶éƒ½ä¼šé‡æ–°è®¡ç®—ã€‚</p>\n<img src=\"/dc828b194f6c868af738144cf344c946/DOMå…ƒç´ å°ºå¯¸.svg\" alt=\"DOMå…ƒç´ å°ºå¯¸\" style=\"zoom:67%;\"> \n<ul>\n<li><code>clientHeight</code> å†…å®¹åŒºåŸŸåŠ å†…è¾¹è·ï¼Œä¸åŒ…å«æ»šåŠ¨æ¡å’Œ borderï¼Œå¯ç”¨äºå†…å®¹çš„æ–‡æ¡£çš„å¯è§éƒ¨åˆ†çš„ width/heighï¼Œ<code>inline</code> å…ƒç´ è·å–çš„ clientWidth å’Œ clientHeight ä¸º 0 ï¼›</li>\n<li><code>offsetWidth</code> åŒ…å«è¾¹æ¡†å’Œæ»šåŠ¨æ¡çš„å®½åº¦ï¼Œä¸åŒ…å«ä¼ªå…ƒç´  (::beforeã€::after)</li>\n<li><code>scrollHeight</code> åŒ…å«æ»šåŠ¨éšè—å°ºå¯¸ï¼ŒåŒ…å«ä¼ªå…ƒç´ ï¼Œå¦‚æœå…ƒç´ æ²¡æœ‰æº¢å‡ºï¼Œè¯¥å€¼ç­‰äº clientHeight</li>\n</ul>\n<blockquote>\n<p>getBoundingClientRect</p>\n</blockquote>\n<p><strong>è®¡ç®—å…ƒç´ ç›¸å¯¹äºè§†å£çš„ä½ç½®</strong></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/0af0c7d38022ec66861c3884bac8f339/ad997/image-20210702112944679.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 77%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACb0lEQVQ4y5WUC4+bOBSF8/9/0u5WlbZPrbadziSThDdkCAFDEhKwMQ/zVSHtqBlNpV2kT9ey0PG510eenZw3yOR+ok7uUNkSJdb/kxVN4VI6fzI7B+/om5Je7unqHKMrGAdMrzF9+x/RjONIHX9hdg7fYwZNr08MXYUMF9T7LUNzpFeHHxxf4fDMoPac9imn8COzyn8PjWasz5gspv78BtXqyeVPRtPfMlzqAGa8Akg9UG2/Mau8v2mPB/LIpwss1PIttVhxTpack8cJJexpRk3h0OQOTeEh0zmt8DGn4yRYS00Vf2VWbT5PG9dzoNm75ElEttux2z6RJjF91/Py62SOzhzG6vSL4B2zKvp0FTRmGqzOLbI4YBP6xJHPU+jhO2u2m5BN4OJZS5I4pq0FrXAZz78THM3VYW4RBxaR7xL5DvbyAd9e4dlLAtcicNeILEOf00mwDyyG2KM6nn7M8KWgsIj9NaFnE14EnPVzvbgNPYtcCOQxps09zI3Dr685tPHWC1zbwlmvCDwXz7ZYP86xV0tca0Wxv8bmZoaqpdq+0rISS/LonjSckwb37PxvpOHDVLNojtgs6OpLyxFq9YEhtBnMwFMYUW3+fSE4Ql9s6TKPXvh0wp9qn4f0eXBdC58289DWPwxlAWZAnkoKUSDsd7/e8jBhqpKxUYxKwiXgqr4OPo0Zm2baH3WDiX2MrKa4TSG/tH1p+eB/QHUgmxbZdEjdIztDrXuKsqasG2QlkUojW4NsB1Q3kogDfXubT5UumJXOX8h0Rb1bPCN3C87bBxLrI4fwy/Sa1LvHm3/KzR1yN7++TunjFLfS/oPvG1RtFeTMZYoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"image-20210702112944679\" title=\"image-20210702112944679\" src=\"/static/0af0c7d38022ec66861c3884bac8f339/5a190/image-20210702112944679.png\" srcset=\"/static/0af0c7d38022ec66861c3884bac8f339/772e8/image-20210702112944679.png 200w,\n/static/0af0c7d38022ec66861c3884bac8f339/e17e5/image-20210702112944679.png 400w,\n/static/0af0c7d38022ec66861c3884bac8f339/5a190/image-20210702112944679.png 800w,\n/static/0af0c7d38022ec66861c3884bac8f339/ad997/image-20210702112944679.png 1012w\" sizes=\"(max-width: 800px) 100vw, 800px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span> \n<ul>\n<li>viewport å†…(ä»¥å¯è§†åŒºåŸŸçš„å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹)ï¼Œç›’æ¨¡å‹å·¦ä¸Šè§’å’Œå³å°è„šçš„åæ ‡ï¼ˆx, yï¼‰</li>\n<li>ie ä¸æ”¯æŒ element.getBoundingClientRect().x</li>\n</ul>\n<deckgo-highlight-code language=\"javascript\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">const rect = ele.getBoundingClientRect();\r\nrect.right - rect.left === rect.width === ele.offsetWidth; // ä¸‰è€…ç›¸ç­‰</code>\n        </deckgo-highlight-code>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\">https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect</a>\r\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CSS_Object_Model/Determining_the_dimensions_of_elements\">ç¡®å®šå…ƒç´ çš„å°ºå¯¸-MDN</a></p>\n<ul>\n<li>getBoundingClientRect æ— æ³•ä½¿ç”¨æ—¶è®¡ç®— <code>element.left</code> å’Œ <code>element.top</code></li>\n</ul>\n<deckgo-highlight-code language=\"javascript\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">// ç›¸å¯¹äº viewport çš„åç§»\r\nfunction getElementLeft(ele, left = 0, top = 0) {\r\n  if (!ele) return { left, top };\r\n  const { offsetLeft, offsetTop } = ele;\r\n  return getElementLeft(ele.offsetParent, left + offsetLeft, top + offsetTop)\r\n}</code>\n        </deckgo-highlight-code>\n<h2>å…ƒç´ ä½ç½®</h2>\n<ul>\n<li>Element.clientTop/Element.clientLeft:  å·¦/ä¸Šè¾¹æ¡†çš„å®½åº¦ï¼ŒåŒ…å«æ»šåŠ¨æ¡å®½åº¦ï¼Œä¸å« marginã€paddingã€‚</li>\n<li>Element.offsetTop:  å…ƒç´ çš„è¾¹æ¡†ç›¸å¯¹äºæœ€è¿‘çš„å®šä½ç¥–å…ˆå…ƒç´ çš„è¾¹æ¡†çš„è·ç¦»</li>\n<li>Element.scrollTop:  å…ƒç´ å†…å®¹åŒºåŸŸæ»šåŠ¨çš„è·ç¦»</li>\n</ul>\n<h2>ç›‘å¬å…ƒç´ å˜åŒ–</h2>\n<ul>\n<li>ç›‘å¬DOMå…ƒç´ å˜åŒ–: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/observe\">MutationObserver</a> <a href=\"https://zh.javascript.info/mutation-observer\">https://zh.javascript.info/mutation-observer</a></li>\n<li>ç›‘å¬DOMå…ƒç´ å°ºå¯¸å˜åŒ–: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver\">ResizeObserver</a> ã€<a href=\"https://github.com/juggle/resize-observer\">Polyfill</a></li>\n<li>ç›‘å¬DOMå…ƒç´ æ˜¯å¦å¯è§: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/IntersectionObserver\">IntersectionObserver</a></li>\n<li>DOMSubtreeModified DOMNodeInserted DOMNodeRemoved  DOMNodeInsertedIntoDocument  DOMNodeRemovedFromDocument DOMAttrModified DOMCharacterDataModified</li>\n</ul>\n<h2>æ»šåŠ¨</h2>\n<ul>\n<li>\n<p><code>window.pageYOffset</code>\r\nä»¥å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œé¡µé¢æ°´å¹³ã€å‚ç›´æ»šåŠ¨çš„è·ç¦»ï¼Œåªè¯»</p>\n</li>\n<li>\n<p><code>window.scrollBy()</code>  å’Œ <code>window.scrollTo()</code>\r\n<code>window.scrollBy(x, y)</code> ç›¸å¯¹äºå½“å‰ä½ç½®æ»šåŠ¨ï¼Œ<code>window.scrollTo(x, y)</code> ç›¸å¯¹äºæ–‡æ¡£å·¦ä¸Šè§’æ»šåŠ¨</p>\n</li>\n<li>\n<p><code>document.documentElement.scrollTop</code> å’Œ <code>document.body.scrollTop/Left</code>ï¼ˆsafariï¼‰ã€<code>ele.scrollTop</code>\r\nå‚ç›´æ»šåŠ¨è·ç¦»ï¼Œå¯è¯»å¯å†™</p>\n</li>\n<li>\n<p><code>ele.scrollIntoView</code></p>\n</li>\n<li>\n<p><code>element.focus()</code> ä¹Ÿä¼šå¯¼è‡´é¡µé¢æ»šåŠ¨å¹¶æ˜¾ç¤ºè·å¾—ç„¦ç‚¹çš„å…ƒç´ </p>\n</li>\n<li>\n<p>åˆ¤æ–­æ˜¯å¦æº¢å‡º</p>\n</li>\n</ul>\n<deckgo-highlight-code language=\"js\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">  ele.clientWidth &lt; ele.scrollWidth || ele.clientHeight &lt; ele.scrollHeight</code>\n        </deckgo-highlight-code>\n<blockquote>\n<p><a href=\"https://zh.javascript.info/size-and-scroll-window\">ç°ä»£JSæ–‡æ¡£: size-and-scroll-window</a>\r\n<a href=\"https://www.runoob.com/jqueryui/example-resizable.html\">Jquery æ‹–æ‹½ resize</a></p>\n</blockquote>\n<h1>Web Worker</h1>\n<p>æµè§ˆå™¨ä¸­ JavaScript å¼•æ“æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ã€‚ä¹Ÿå°±æ˜¯åœ¨åŒä¸€æ—¶é—´å†…åªèƒ½æœ‰ä¸€æ®µä»£ç è¢« JavaScript å¼•æ“æ‰§è¡Œã€‚å¦‚æœåŒä¸€æ—¶é—´è¿˜æœ‰å…¶å®ƒä»£ç éœ€è¦æ‰§è¡Œçš„è¯ï¼Œåˆ™è¿™äº›ä»£ç éœ€è¦ç­‰å¾… JavaScript å¼•æ“æ‰§è¡Œå®Œæˆå½“å‰çš„ä»£ç ä¹‹åæ‰æœ‰å¯èƒ½è·å¾—è¢«æ‰§è¡Œçš„æœºä¼šã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒJavaScript å¼•æ“ä¼šé¡ºåºæ‰§è¡Œé¡µé¢ä¸Šçš„æ‰€æœ‰ JavaScript ä»£ç ã€‚å½“é¡µé¢åŠ è½½å®Œæˆä¹‹åï¼ŒJavaScript å¼•æ“ä¼šè¿›å…¥ç©ºé—²çŠ¶æ€ã€‚ç”¨æˆ·åœ¨é¡µé¢ä¸Šçš„æ“ä½œä¼šè§¦å‘ä¸€äº›äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶çš„å¤„ç†æ–¹æ³•ä¼šäº¤ç»™ JavaScript å¼•æ“æ¥æ‰§è¡Œã€‚ç”±äº JavaScript å¼•æ“çš„å•çº¿ç¨‹ç‰¹æ€§ï¼Œä¸€èˆ¬ä¼šåœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå¾…å¤„ç†çš„äº‹ä»¶é˜Ÿåˆ—ã€‚æ¯æ¬¡ä»äº‹ä»¶é˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªäº‹ä»¶å¤„ç†æ–¹æ³•æ¥æ‰§è¡Œã€‚å¦‚æœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰æ–°çš„äº‹ä»¶å‘ç”Ÿï¼Œåˆ™æ–°äº‹ä»¶çš„å¤„ç†æ–¹æ³•åªä¼šè¢«åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ­£åœ¨æ‰§è¡Œçš„äº‹ä»¶å¤„ç†æ–¹æ³•éå¸¸è€—æ—¶ï¼Œåˆ™é˜Ÿåˆ—ä¸­çš„å…¶å®ƒäº‹ä»¶å¤„ç†æ–¹æ³•å¯èƒ½é•¿æ—¶é—´æ— æ³•å¾—åˆ°æ‰§è¡Œï¼Œé€ æˆç”¨æˆ·ç•Œé¢å¤±å»å“åº”ï¼Œä¸¥é‡å½±å“ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚</p>\n<ul>\n<li>\n<p>ä¸»çº¿ç¨‹<strong>å¼‚æ­¥</strong>åˆ›å»º web workerï¼Œä¸»çº¿ç¨‹ä»£ç ä¸ä¼šé˜»å¡åœ¨è¿™é‡Œç­‰å¾… worker çº¿ç¨‹å»åŠ è½½ã€æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬æ–‡ä»¶ï¼Œè€Œæ˜¯ä¼šç«‹å³å‘ä¸‹ç»§ç»­æ‰§è¡Œåé¢ä»£ç ã€‚</p>\n</li>\n<li>\n<p>Web Worker è‡ªèº«æ˜¯ç”± webkit(æµè§ˆå™¨å†…æ ¸) å¤šçº¿ç¨‹å®ç°ï¼Œä½†å®ƒå¹¶æ²¡æœ‰ä¸º JavaScript è¯­è¨€å¸¦æ¥å¤šçº¿ç¨‹ç¼–ç¨‹ç‰¹æ€§ï¼Œæˆ‘ä»¬ç°åœ¨ä»ç„¶ä¸èƒ½åœ¨ JavaScript ä»£ç ä¸­åˆ›å»ºå¹¶ç®¡ç†ä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ–è€…ä¸»åŠ¨æ§åˆ¶çº¿ç¨‹é—´çš„åŒæ­¥ä¸é”ç­‰ç‰¹æ€§ã€‚</p>\n</li>\n</ul>\n<p>åœ¨æˆ‘çœ‹æ¥ï¼ŒWeb Worker æ˜¯ worker ç¼–ç¨‹æ¨¡å‹åœ¨æµè§ˆå™¨ç«¯ JavaScript è¯­è¨€ä¸­çš„åº”ç”¨ã€‚æµè§ˆå™¨çš„è¿è¡Œæ—¶, åŒå…¶ä»– GUI ç¨‹åºç±»ä¼¼ï¼Œæ ¸å¿ƒé€»è¾‘åƒæ˜¯ä¸‹é¢è¿™ä¸ªæ— é™å¾ªç¯:</p>\n<deckgo-highlight-code language=\"js\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">while(true){  \r\n  // 1 æ›´æ–°æ•°æ®å’Œå¯¹è±¡çŠ¶æ€  \r\n  // 2 æ¸²æŸ“å¯è§†åŒ–UI  \r\n}</code>\n        </deckgo-highlight-code>\n<p>åœ¨ Web Worker ä¹‹å‰ï¼ŒJavaScript æ‰§è¡Œå¼•æ“åªèƒ½åœ¨ä¸€ä¸ªå•çº¿ç¨‹ç¯å¢ƒä¸­å®Œæˆè¿™ä¸¤é¡¹ä»»åŠ¡ã€‚è€Œåœ¨å…¶ä»–å…¸å‹ GUI æ¡†æ¶ï¼Œå¦‚å‰æ–‡ Swing åº“ä¸­ï¼Œæ—©å·²å¼•å…¥äº† Swing Worker æ¥è§£å†³å¤§é‡è®¡ç®—å¯¹ UI æ¸²æŸ“çš„é˜»å¡é—®é¢˜ã€‚Web Worker çš„å¼•å…¥ï¼Œæ˜¯å€Ÿé‰´äº† worker ç¼–ç¨‹æ¨¡å‹ï¼Œç»™å•çº¿ç¨‹çš„ JavaScript å¸¦æ¥äº†åå°è®¡ç®—çš„èƒ½åŠ›ã€‚</p>\n<blockquote>\n<p>å‚è€ƒ</p>\n</blockquote>\n<ul>\n<li><a href=\"http://www.alloyteam.com/2015/11/deep-in-web-worker/#prettyPhoto\">è…¾è®¯å…¨ç«¯ AlloyTeam-Web Worker</a></li>\n<li><a href=\"https://www.ibm.com/developerworks/cn/web/1105_chengfu_jsworker/index.html\">JS å·¥ä½œçº¿ç¨‹å®ç°æ–¹å¼-setTimeout &#x26; web worker</a>\r\nsetTimeout &#x26; setInterval æ‰§è¡Œè¿‡ç¨‹ï¼›</li>\n</ul>\n<h1>å®ç°åŠ¨ç”»çš„æ–¹æ³•</h1>\n<ol>\n<li>css:  transition animation</li>\n<li>js: setTimeoutã€setIntervalã€requestAnimationFrame</li>\n<li><strong>html5: canvas ?</strong></li>\n</ol>\n<blockquote>\n<p>å‚è€ƒ</p>\n</blockquote>\n<ul>\n<li><a href=\"https://threejs.org/examples/#webgl_decals\">ä¸‰ç»´åŠ¨ç”»åº“</a></li>\n<li><a href=\"https://www.cnblogs.com/coco1s/p/15009605.html\">å¸¦åœ†è§’çš„ä¸‰è§’å½¢-åŠ¨ç”»</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Basic_animations\">Animation</a></li>\n</ul>\n<h1>ç‰¹æ®Šè¿ç®—ç¬¦</h1>\n<blockquote>\n<p><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Operators/Optional_chaining\">å¯é€‰é“¾ ç©ºå€¼è¿ç®—ç¬¦</a></p>\n</blockquote>\n<blockquote>\n<p>void 0 &#x26; undefined</p>\n</blockquote>\n<p>undefined ä¸æ˜¯ JS ä¸­çš„ä¿ç•™å­—ï¼Œè€Œæ˜¯å…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œåœ¨ ES5 ä¹‹å‰æ˜¯å¯ä¿®æ”¹çš„ï¼ˆ<code>undefined = 1</code>ï¼‰ï¼ŒES5 ä¹‹åä¿®æ”¹ä¸ºåªè¯»å±æ€§ï¼Œä½†æ˜¯åœ¨å±€éƒ¨ä½œç”¨åŸŸå†…ä¾ç„¶å¯ä»¥è¦†ç›– undefined çš„å€¼ï¼Œå¦‚ï¼š<code>const undefined = 1;</code>ã€‚</p>\n<blockquote>\n<p>new this</p>\n</blockquote>\n<p>ä½¿ç”¨ <code>new</code> å®ä¾‹åŒ–å¯¹è±¡æ—¶æ„é€ å‡½æ•°å†…éƒ¨<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new#description\">æ‰§è¡Œæ­¥éª¤</a></p>\n<ul>\n<li>è‹¥æ‰§è¡Œ new Foo()ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</li>\n</ul>\n<p>1ï¼‰åˆ›å»ºæ–°å¯¹è±¡ oï¼›\r\n2ï¼‰ç»™æ–°å¯¹è±¡çš„å†…éƒ¨å±æ€§èµ‹å€¼ï¼Œå…³é”®æ˜¯ç»™[[Prototype]]å±æ€§èµ‹å€¼ï¼Œæ„é€ åŸå‹é“¾ï¼ˆå¦‚æœæ„é€ å‡½æ•°çš„åŸå‹æ˜¯ Object ç±»å‹ï¼Œåˆ™æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹ï¼›ä¸ç„¶æŒ‡å‘ Object å¯¹è±¡çš„åŸå‹ï¼‰ï¼›\r\n3ï¼‰æ‰§è¡Œå‡½æ•° Fooï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­å†…éƒ¨ this æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ oï¼›\r\n4ï¼‰å¦‚æœ Foo å†…éƒ¨æ˜¾å¼è¿”å›å¯¹è±¡ç±»å‹æ•°æ®ï¼Œåˆ™è¿”å›è¯¥æ•°æ®ï¼›å¦åˆ™è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ oã€‚</p>\n<ul>\n<li>åœ¨ Person å‡½æ•°ä½“ä¸­åˆ¤æ–­å‡½æ•°æ˜¯å¦å·² <code>new</code> è°ƒç”¨</li>\n</ul>\n<ol>\n<li><code>this instanceof Person</code></li>\n<li>ES6 ç¯å¢ƒä¸‹: <code>new.target === Person</code></li>\n</ol>\n<h1>String</h1>\n<blockquote>\n<p>æ¦‚å¿µ</p>\n</blockquote>\n<p>16ä½ Unicode å­—ç¬¦ | åŒå­—èŠ‚å­—ç¬¦</p>\n<p>UTF-16 æœ€å¤šèƒ½è¡¨ç¤º 2^16=65536 ä¸ªå­—ç¬¦ï¼Œ è¿™ 65536 ä¸ªå­—ç¬¦ç§°ä¸º basic multilingual plane (BMP) å­—ç¬¦é›†ï¼Œå¯ä»¥ç”¨ <code>\\uxxxx</code> è¡¨ç¤ºã€‚</p>\n<p>Unicode code points range from 0 to 1114111 (0x10FFFF). The first 128 Unicode code points are a direct match of the ASCII character encoding.</p>\n<p>Unicode å­—ç¬¦é›†è¿œå¤§äº 65536ï¼Œè¶…è¿‡çš„å­—ç¬¦å°±ç”¨ä¸¤ä¸ª UTF-16 ç¼–ç å•å…ƒ(4å­—èŠ‚)è¡¨ç¤ºï¼Œè¿™ä¸¤ä¸ªç¼–ç å•å…ƒæ¯ä¸ªçš„å–å€¼åœ¨ 0xD800 - 0xDFFF èŒƒå›´ã€‚</p>\n<p>æ¯ä¸ª Unicode å­—ç¬¦ç”±ä¸€ä¸ªæˆ–ä¸¤ä¸ª UTF-16 ç¼–ç å•å…ƒè¡¨ç¤ºï¼Œåˆç§° <strong>Unicode code point</strong>ï¼Œç”¨ <code>\\u{xxxx}</code> 1åˆ°6ä½16è¿›åˆ¶æ•°è¡¨ç¤ºã€‚</p>\n<p>\"unicode\": \"2764 FE0F\",\r\n\"icon\": \"â¤ï¸\"</p>\n<p>\"unicode\": \"1F525\",\r\n\"icon\": \"ğŸ”¥\"</p>\n<ul>\n<li>\n<p>ğŸ˜€</p>\n<ul>\n<li>length: 2</li>\n<li>uncode: [\\uD83D, \\uDE00] => [55357, 56832]</li>\n<li>è½¬ä¹‰è¡¨ç¤º:  \\u{1f600}</li>\n</ul>\n</li>\n<li>\n<p>a</p>\n<ul>\n<li>ASCII:  97  0x60</li>\n<li>è½¬ä¹‰è¡¨ç¤º: \\u0061 æˆ– \\u{61}</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•</p>\n</blockquote>\n<ul>\n<li>String.prototype.charCodeAt  String.fromCharCode  ==> UTF-16 code unit</li>\n<li>String.prototype.codePointAt  String.fromCodePoint  ==> Unicode code point</li>\n<li>btoa  atob <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/btoa\">https://developer.mozilla.org/en-US/docs/Web/API/btoa</a></li>\n</ul>\n<blockquote>\n<p>å‚è€ƒ</p>\n</blockquote>\n<p><a href=\"https://zh.javascript.info/unicode\">Unicode-javascript.info</a></p>\n<h1>Number</h1>\n<p>åœ¨å†…éƒ¨ï¼Œæ•°å­—æ˜¯ä»¥ 64 ä½æ ¼å¼ IEEE-754 è¡¨ç¤ºçš„ï¼Œæ‰€ä»¥æ­£å¥½æœ‰ 64 ä½å¯ä»¥å­˜å‚¨ä¸€ä¸ªæ•°å­—ï¼š1ä¸ªç¬¦å·ä½ã€11ä¸ªæŒ‡æ•°ä½ï¼ˆexponentï¼‰ã€52ä¸ªå°æ•°ä½ï¼ˆmantissaï¼‰ã€‚</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/28b1da248e48f3dd5f49a2498e66a2eb/efb68/image-20230215135713259.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABFElEQVQoz42RbWvCMBCA+///0PbNzZf229gLsjmrQ6ct1dk2aUzbpOkzqigbCtvBQ+4S7ni4eLY2ZEnKZpVwLXZSskquv7Vte3HnLbYRt/MeN/Me7w8+0TBg7QesRj7rkc+iP+Dj7p7ID/gcjoiCgGV/QPL0jHPtYehPvDjd8CpCXrIJy/EjxcsYOZshwhAxDZHh7Ew+nR7PyRtpGNK27tKwkAUqK9BSk8cJRbJBaI3Y75FaU5TlGVVVyLKmsCAqkKpCSoGUkizL0FrjlWXJLk3Zfm3JhUAqRZ7nKKWwxlDXNeYXBmMajHXYxmGtPWCMoWkavFPSNXbDT7Vz7urS/wqva+6MOuU4jg9mQoijobXn3/wv32ouGVizdFUVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20230215135713259\"\n        title=\"image-20230215135713259\"\n        src=\"/static/28b1da248e48f3dd5f49a2498e66a2eb/5a190/image-20230215135713259.png\"\n        srcset=\"/static/28b1da248e48f3dd5f49a2498e66a2eb/772e8/image-20230215135713259.png 200w,\n/static/28b1da248e48f3dd5f49a2498e66a2eb/e17e5/image-20230215135713259.png 400w,\n/static/28b1da248e48f3dd5f49a2498e66a2eb/5a190/image-20230215135713259.png 800w,\n/static/28b1da248e48f3dd5f49a2498e66a2eb/c1b63/image-20230215135713259.png 1200w,\n/static/28b1da248e48f3dd5f49a2498e66a2eb/29007/image-20230215135713259.png 1600w,\n/static/28b1da248e48f3dd5f49a2498e66a2eb/efb68/image-20230215135713259.png 2032w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><code>e</code> ç­‰äº 11 ä½æŒ‡æ•°ä½è¡¨ç¤ºçš„æ•°ï¼Œæœ€å¤§ä¸º 2^11-1-1=1023ï¼Œæœ€å°ä¸º1</p>\n<p>11 ä½æŒ‡æ•°æœ‰ä¸¤ä¸ªç‰¹æ®Šæƒ…å†µ\r\n1ï¼‰å…¨ä¸º0ï¼šå½“52ä½å°æ•°å…¨ä¸º0æ—¶è¡¨ç¤ºæ­£è´Ÿ0ï¼Œå¦åˆ™è¡¨ç¤ºéè§„èŒƒåŒ–æµ®ç‚¹æ•°\r\n2ï¼‰å…¨ä¸º1ï¼šå½“52ä½å°æ•°å…¨ä¸º0æ—¶è¡¨ç¤ºæ­£è´Ÿæ— ç©·å¤§ï¼Œå¦åˆ™è¡¨ç¤º NaN</p>\n<p>Integers can only be represented without loss of precision in the range  <code>-2^53 + 1 to 2^53 - 1</code>ã€‚<span style=\"color:red\">å®é™…æµ‹è¯•ä¸º -2^53 åˆ° 2^53</span></p>\n<p>æœ€å¤§å®‰å…¨æ•´æ•°ï¼šNumber.MAX_SAFE_INTEGER = 2^53</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format\">åŒç²¾åº¦æµ®ç‚¹æ•°-Wiki</a></p>\n<p>æœ€å¤§æ•´æ•°\r\nç²¾åº¦ä¸¢å¤±\r\nisNaN\r\nisFinite</p>\n<blockquote>\n<p>è§£å†³ç²¾åº¦é—®é¢˜</p>\n</blockquote>\n<p><a href=\"https://github.com/josdejong/mathjs/\">mathjs</a>\r\n<a href=\"https://github.com/nefe/number-precision\">number-precision</a></p>\n<h1>eval</h1>\n<p>å‚æ•°ï¼šé¢„æœŸæ˜¯å­—ç¬¦ä¸²\r\nè¿”å›å€¼ï¼šè‹¥å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¿”å›å€¼å°±æ˜¯å­—ç¬¦ä¸²æ‰§è¡Œçš„ç»“æœï¼Œå¦åˆ™è¿”å›å€¼æ˜¯è¾“å…¥å‚æ•°æœ¬èº«</p>\n<p>ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼š\r\nç›´æ¥è°ƒç”¨ï¼ševal()\r\né—´æ¥è°ƒç”¨ï¼ševal?.()ã€åˆ«åã€å¯¹è±¡å±æ€§ã€è¡¨è¾¾å¼</p>\n<p>ç›´æ¥è°ƒç”¨ã€é—´æ¥è°ƒç”¨çš„åŒºåˆ«ï¼š</p>\n<ul>\n<li>\n<p>æ˜¯å¦ç»§æ‰¿ä¸Šçº§ä½œç”¨åŸŸçš„ strict æ¨¡å¼</p>\n<ul>\n<li>é—´æ¥è°ƒç”¨ä¸ç»§æ‰¿ä¸Šçº§ä½œç”¨åŸŸçš„ 'use strict' æ¨¡å¼ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªå£°æ˜äº† 'use strict' çš„å‡½æ•°ä¸­ä»¥é—´æ¥çš„æ–¹å¼è°ƒç”¨ evalï¼Œeval ä¸­ä»£ç æ˜¯åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œ</li>\n<li>ç›´æ¥è°ƒç”¨ä¼šç»§æ‰¿ strict æ¨¡å¼</li>\n</ul>\n</li>\n<li>\n<p>æ‰§è¡Œç¯å¢ƒï¼ˆä½œç”¨åŸŸï¼‰</p>\n<ul>\n<li>é—´æ¥è°ƒç”¨çš„æ‰§è¡Œä½œç”¨åŸŸä¸ºå…¨å±€ä½œç”¨åŸŸï¼Œeval ä¸­çš„ script ä¸èƒ½è®¿é—®å±€éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡</li>\n<li>ç›´æ¥è°ƒç”¨çš„ä½œç”¨åŸŸä¸ºï¼Ÿ</li>\n<li>ç›´æ¥è°ƒç”¨çš„ eval å¯ä»¥è®¿é—®è®¿é—®å…¶ä»–ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ã€å±é™©ï¼Œå¯èƒ½ä¿®æ”¹å±€éƒ¨å˜é‡ã€‘</li>\n</ul>\n</li>\n<li>\n<p>å˜é‡å£°æ˜å’Œå‡½æ•°å£°æ˜</p>\n<ul>\n<li>åœ¨é strict æ¨¡å¼ä¸‹ï¼Œå¯¹äºç›´æ¥è°ƒç”¨å½¢å¼ï¼Œvarå£°æ˜çš„å˜é‡å’Œå‡½æ•°å±äºä¸Šçº§ä½œç”¨åŸŸ(surrounding scope)ï¼Œeval ä¸­çš„ä»£ç å¯èƒ½ä¿®æ”¹å¤–éƒ¨çš„å˜é‡å€¼ï¼›å¯¹äºé—´æ¥è°ƒç”¨ï¼Œvarå£°æ˜çš„å˜é‡å’Œå‡½æ•°å±äºå…¨å±€ä½œç”¨åŸŸ</li>\n<li>åœ¨ strict æ¨¡å¼ä¸‹ï¼Œvarå£°æ˜çš„å˜é‡å’Œå‡½æ•°å±äºå±€éƒ¨ä½œç”¨åŸŸï¼Œå’Œè°ƒç”¨æ–¹å¼æ— å…³</li>\n<li>let å’Œ const å£°æ˜çš„å˜é‡å§‹ç»ˆå±äºå±€éƒ¨ä½œç”¨åŸŸ</li>\n<li>ç›´æ¥ eval ä¼šè¯»å–å’Œä¿®æ”¹å‘¨å›´ä½œç”¨åŸŸä¸­çš„ç»‘å®šï¼Œè¿™å¯èƒ½å¯¼è‡´å¤–éƒ¨è¾“å…¥ç ´åæœ¬åœ°æ•°æ®ã€‚</li>\n</ul>\n</li>\n</ul>","id":"c25ec6c8-d550-5d61-8697-c3189c91dbe3","parent":{"name":"æ€»ç»“","base":"æ€»ç»“.md","mtime":"2023-03-14T03:35:18.000Z","sourceInstanceName":"markdown"}}},"pageContext":{"articlePath":"/articles/å‰ç«¯/JS/æ€»ç»“/"}},"staticQueryHashes":["3957182205"]}