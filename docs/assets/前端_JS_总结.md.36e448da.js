import{_ as s,o as l,c as a,V as o}from"./chunks/framework.33d73f2c.js";const n="/assets/DOMå…ƒç´ å°ºå¯¸.98206b58.svg",e="/assets/image-20210702112944679.78f2a487.png",p="/assets/image-20230215135713259.9b947b7a.png",h=JSON.parse('{"title":"é¡µé¢ç”Ÿå‘½å‘¨æœŸ","description":"","frontmatter":{},"headers":[],"relativePath":"å‰ç«¯/JS/æ€»ç»“.md","filePath":"å‰ç«¯/JS/æ€»ç»“.md","lastUpdated":1691037194000}'),t={name:"å‰ç«¯/JS/æ€»ç»“.md"},r=o(`<h1 id="é¡µé¢ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">é¡µé¢ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#é¡µé¢ç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;é¡µé¢ç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h1><ul><li><p>window.onload</p></li><li><p>window.onunload</p></li><li><p>window.onbeforeunload</p></li><li><p>document.addEventListener(&quot;DOMContentLoaded&quot;, fn); DOMContentLoaded åªèƒ½ç”¨addEventListenerç›‘å¬</p></li><li><p>document.addEventListener(&#39;readystatechange&#39;, fn);</p><ul><li>å¯¹åº” document.readyState å±æ€§ï¼Œå–å€¼ï¼šloading | interactive | complete</li><li>Loading: html åŠ è½½ä¸­</li><li>interactive: htmlåŠ è½½å®Œæˆ, dom è§£æå®Œæˆï¼Œå¯ä»¥æ“ä½œdomï¼Œä½†æ˜¯jsã€å›¾åƒç­‰èµ„æºè¿˜åœ¨åŠ è½½ï¼Œè§¦å‘ DOMContentLoaded äº‹ä»¶</li><li>complete: èµ„æºå®Œå…¨åŠ è½½ï¼Œè§¦å‘ window.onload</li></ul></li></ul><p>å‚è€ƒ <a href="https://zh.javascript.info/onload-ondomcontentloaded" target="_blank" rel="noreferrer">javascript.info</a></p><h1 id="viewport-è§†å£" tabindex="-1">viewport | è§†å£ <a class="header-anchor" href="#viewport-è§†å£" aria-label="Permalink to &quot;viewport | è§†å£&quot;">â€‹</a></h1><p>ç¼©æ”¾æ”¹å˜çš„æ˜¯ <code>window.devicePixelRatio</code></p><ul><li><p>å¸ƒå±€è§†å£ï¼šæ¸²æŸ“åé¡µé¢çš„å®é™…å¤§å°ï¼ŒåŒ…å«æ»šåŠ¨æƒ…å†µä¸‹æº¢å‡ºçš„åŒºåŸŸï¼Œé¡µé¢ç¼©æ”¾æ—¶ï¼ˆè°ƒæ•´ç¼©æ”¾çº§åˆ«ï¼‰å¤§å°ä¸å˜ã€‚</p></li><li><p>å¯è§è§†å£ï¼šé¡µé¢å¯è§çš„éƒ¨åˆ†ï¼Œç¼©æ”¾æ—¶å°ºå¯¸ä¸å˜çš„éƒ¨åˆ†ï¼ˆåœ°å€æ ã€ä¹¦ç­¾æ ï¼‰éƒ½ä¸ç®—å¯è§è§†å£çš„åŒºåŸŸã€‚</p><ul><li>å¯è§è§†å£å¤§å°ä¸çª—å£å¤§å°å’Œç¼©æ”¾çº§åˆ«æœ‰å…³</li><li>å¦‚ä½•è¯»å†™ï¼Ÿ</li></ul></li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> pageWidth </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> window</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerWidth</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> pageHeight </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> window</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHeight</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> pageWidth </span><span style="color:#89DDFF;">!==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">compatMode</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">CSS1Compat</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">pageWidth</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">documentElement</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientWidth</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">pageHeight</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">documentElement</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientHeight</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// æ··æ‚æ¨¡å¼</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">pageWidth</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientWidth</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">pageHeight</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientHeight</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><ul><li><code>window.screen.availHeight\\Width\\Left\\Top</code></li><li>ç½‘é¡µç¼©æ”¾æ—¶å¸ƒå±€è§†å£ã€å¯è§è§†å£çš„å˜åŒ–ï¼Ÿ</li><li><a href="https://zh.javascript.info/popup-windows#yi-dong-he-tiao-zheng-da-xiao" target="_blank" rel="noreferrer">https://zh.javascript.info/popup-windows#yi-dong-he-tiao-zheng-da-xiao</a></li></ul><blockquote><p>æ—§æ–‡æ¡£</p></blockquote><ul><li><p>å¸ƒå±€è§†çª—å¯ä»¥é€šè¿‡ <code>&lt;meta&gt;</code> æ ‡ç­¾è®¾ç½® viewport æ¥ä¿®æ”¹ã€‚æ¯ä¸ªæµè§ˆå™¨é»˜è®¤éƒ½ä¼šæœ‰ä¸€ä¸ªè®¾ç½®ï¼Œä¾‹å¦‚iOSï¼ŒAndroidè¿™äº›æœºå‹è®¾ç½®å¸ƒå±€è§†çª—å®½åº¦ä¸º980pxï¼Œæ‰€ä»¥PCä¸Šçš„ç½‘é¡µåŸºæœ¬èƒ½åœ¨æ‰‹æœºä¸Šå‘ˆç°ï¼Œåªä¸è¿‡å…ƒç´ çœ‹ä¸Šå»å¾ˆå°ï¼Œä¸€èˆ¬å¯ä»¥é€šè¿‡æ‰‹æŒ‡åŠ¨åŒå‡»ç¼©æ”¾ç½‘é¡µã€‚</p></li><li><p>æ§åˆ¶æ”¾å¤§å’Œç¼©å°çš„å°±æ˜¯è§†çª—Viewport</p></li><li><p>window.screen.widthï¼šè·å–å±å¹•çš„å®½åº¦ï¼Œç­‰äºç³»ç»Ÿè®¾ç½®é‡Œé¢çš„å±å¹•åˆ†è¾¨ç‡ï¼Œå’Œé¡µé¢æ²¡æœ‰å…³ç³»ï¼ˆåŒ…æ‹¬resize ã€ç¼©æ”¾ï¼‰</p></li><li><p>ä»€ä¹ˆæ˜¯ viewport è§†å£</p><ul><li>å¯è§†åŒºåŸŸï¼Œä¸åŒ…å«æ»šåŠ¨ä¹‹å¤–çš„å†…å®¹</li><li>è§†å£ === å¸ƒå±€è§†å£ === document.documentElement.clientWidth</li><li>layout viewport | visual viewport (å¸ƒå±€è§†å£)</li><li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Viewport" target="_blank" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Glossary/Viewport</a></li></ul></li><li><p><code>window.innerWidth</code>: visual viewport çš„å®½åº¦ã€‚é¡µé¢ç¼©æ”¾ä¼šå½±å“è¯¥å€¼ï¼Œæ”¾å¤§æ—¶å€¼å˜å°ã€‚</p></li><li><p><code>window.outerWidth</code>: æ•´ä¸ªæµè§ˆå™¨çª—å£çš„å°ºå¯¸ï¼ŒåŒ…å«ä»æ ‡ç­¾é¡µé¡¶éƒ¨çš„å°ºå¯¸</p></li><li><p>è·å–æ–‡æ¡£å°ºå¯¸</p></li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> scrollHeight </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scrollHeight</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">documentElement</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scrollHeight</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">offsetHeight</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">documentElement</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">offsetHeight</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientHeight</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">documentElement</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientHeight</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>è·å–æµè§ˆå™¨è§†å£å¤§å°</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getViewportSize</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// æ··æ‚æ¨¡å¼</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">compatMode</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">BackCompat</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      width</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientWidth</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      height</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientHeight</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    width</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">documentElement</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientWidth</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    height</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">documentElement</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientHeight</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h1 id="domæ“ä½œ" tabindex="-1">DOMæ“ä½œ <a class="header-anchor" href="#domæ“ä½œ" aria-label="Permalink to &quot;DOMæ“ä½œ&quot;">â€‹</a></h1><h2 id="å…ƒç´ å°ºå¯¸" tabindex="-1">å…ƒç´ å°ºå¯¸ <a class="header-anchor" href="#å…ƒç´ å°ºå¯¸" aria-label="Permalink to &quot;å…ƒç´ å°ºå¯¸&quot;">â€‹</a></h2><blockquote><p>clientHeight offsetHeight scrollHeight</p></blockquote><p>clientWidthã€offsetWidthã€scrollWidth éƒ½æ˜¯åªè¯»å±æ€§ï¼Œè€Œä¸”æ¯æ¬¡è®¿é—®è¿™äº›å±æ€§æ—¶éƒ½ä¼šé‡æ–°è®¡ç®—ã€‚</p><img src="`+n+'" alt="DOMå…ƒç´ å°ºå¯¸" style="zoom:67%;"><ul><li><code>clientHeight</code> å†…å®¹åŒºåŸŸåŠ å†…è¾¹è·ï¼Œä¸åŒ…å«æ»šåŠ¨æ¡å’Œ borderï¼Œå¯ç”¨äºå†…å®¹çš„æ–‡æ¡£çš„å¯è§éƒ¨åˆ†çš„ width/heighï¼Œ<code>inline</code> å…ƒç´ è·å–çš„ clientWidth å’Œ clientHeight ä¸º 0 ï¼›</li><li><code>offsetWidth</code> åŒ…å«è¾¹æ¡†å’Œæ»šåŠ¨æ¡çš„å®½åº¦ï¼Œä¸åŒ…å«ä¼ªå…ƒç´  (::beforeã€::after)</li><li><code>scrollHeight</code> åŒ…å«æ»šåŠ¨éšè—å°ºå¯¸ï¼ŒåŒ…å«ä¼ªå…ƒç´ ï¼Œå¦‚æœå…ƒç´ æ²¡æœ‰æº¢å‡ºï¼Œè¯¥å€¼ç­‰äº clientHeight</li></ul><blockquote><p>getBoundingClientRect</p></blockquote><p><strong>è®¡ç®—å…ƒç´ ç›¸å¯¹äºè§†å£çš„ä½ç½®</strong></p><img src="'+e+`" alt="image-20210702112944679" style="zoom:50%;"><ul><li>viewport å†…(ä»¥å¯è§†åŒºåŸŸçš„å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹)ï¼Œç›’æ¨¡å‹å·¦ä¸Šè§’å’Œå³å°è„šçš„åæ ‡ï¼ˆx, yï¼‰</li><li>ie ä¸æ”¯æŒ element.getBoundingClientRect().x</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> rect </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ele</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBoundingClientRect</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">rect</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">right </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> rect</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">left </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> rect</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> ele</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">offsetWidth</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// ä¸‰è€…ç›¸ç­‰</span></span></code></pre></div><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect</a><a href="https://developer.mozilla.org/en-US/docs/Web/API/CSS_Object_Model/Determining_the_dimensions_of_elements" target="_blank" rel="noreferrer">ç¡®å®šå…ƒç´ çš„å°ºå¯¸-MDN</a></p><ul><li>getBoundingClientRect æ— æ³•ä½¿ç”¨æ—¶è®¡ç®— <code>element.left</code> å’Œ <code>element.top</code></li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// ç›¸å¯¹äº viewport çš„åç§»</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getElementLeft</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">ele</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">left</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">top</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">ele</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">left</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">top</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">offsetLeft</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">offsetTop</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ele</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getElementLeft</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ele</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">offsetParent</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">left</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">offsetLeft</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">top</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">offsetTop</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h2 id="å…ƒç´ ä½ç½®" tabindex="-1">å…ƒç´ ä½ç½® <a class="header-anchor" href="#å…ƒç´ ä½ç½®" aria-label="Permalink to &quot;å…ƒç´ ä½ç½®&quot;">â€‹</a></h2><ul><li>Element.clientTop/Element.clientLeft: å·¦/ä¸Šè¾¹æ¡†çš„å®½åº¦ï¼ŒåŒ…å«æ»šåŠ¨æ¡å®½åº¦ï¼Œä¸å« marginã€paddingã€‚</li><li>Element.offsetTop: å…ƒç´ çš„è¾¹æ¡†ç›¸å¯¹äºæœ€è¿‘çš„å®šä½ç¥–å…ˆå…ƒç´ çš„è¾¹æ¡†çš„è·ç¦»</li><li>Element.scrollTop: å…ƒç´ å†…å®¹åŒºåŸŸæ»šåŠ¨çš„è·ç¦»</li></ul><h2 id="ç›‘å¬å…ƒç´ å˜åŒ–" tabindex="-1">ç›‘å¬å…ƒç´ å˜åŒ– <a class="header-anchor" href="#ç›‘å¬å…ƒç´ å˜åŒ–" aria-label="Permalink to &quot;ç›‘å¬å…ƒç´ å˜åŒ–&quot;">â€‹</a></h2><ul><li><p>ç›‘å¬DOMå…ƒç´ å˜åŒ–: <a href="https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/observe" target="_blank" rel="noreferrer">MutationObserver</a> <a href="https://zh.javascript.info/mutation-observer" target="_blank" rel="noreferrer">https://zh.javascript.info/mutation-observer</a></p></li><li><p>ç›‘å¬DOMå…ƒç´ å°ºå¯¸å˜åŒ–: <a href="https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver" target="_blank" rel="noreferrer">ResizeObserver</a> ã€<a href="https://github.com/juggle/resize-observer" target="_blank" rel="noreferrer">Polyfill</a></p></li><li><p>ç›‘å¬DOMå…ƒç´ æ˜¯å¦å¯è§: <a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/IntersectionObserver" target="_blank" rel="noreferrer">IntersectionObserver</a></p></li><li><p>DOMSubtreeModified DOMNodeInserted DOMNodeRemoved DOMNodeInsertedIntoDocument DOMNodeRemovedFromDocument DOMAttrModified DOMCharacterDataModified</p></li></ul><h2 id="æ»šåŠ¨" tabindex="-1">æ»šåŠ¨ <a class="header-anchor" href="#æ»šåŠ¨" aria-label="Permalink to &quot;æ»šåŠ¨&quot;">â€‹</a></h2><ul><li><p><code>window.pageYOffset</code> ä»¥å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œé¡µé¢æ°´å¹³ã€å‚ç›´æ»šåŠ¨çš„è·ç¦»ï¼Œåªè¯»</p></li><li><p><code>window.scrollBy()</code> å’Œ <code>window.scrollTo()</code><code>window.scrollBy(x, y)</code> ç›¸å¯¹äºå½“å‰ä½ç½®æ»šåŠ¨ï¼Œ<code>window.scrollTo(x, y)</code> ç›¸å¯¹äºæ–‡æ¡£å·¦ä¸Šè§’æ»šåŠ¨</p></li><li><p><code>document.documentElement.scrollTop</code> å’Œ <code>document.body.scrollTop/Left</code>ï¼ˆsafariï¼‰ã€<code>ele.scrollTop</code> å‚ç›´æ»šåŠ¨è·ç¦»ï¼Œå¯è¯»å¯å†™</p></li><li><p><code>ele.scrollIntoView</code></p></li><li><p><code>element.focus()</code> ä¹Ÿä¼šå¯¼è‡´é¡µé¢æ»šåŠ¨å¹¶æ˜¾ç¤ºè·å¾—ç„¦ç‚¹çš„å…ƒç´ </p></li><li><p>åˆ¤æ–­æ˜¯å¦æº¢å‡º</p></li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ele</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientWidth </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> ele</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scrollWidth </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> ele</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientHeight </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> ele</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scrollHeight</span></span></code></pre></div><blockquote><p><a href="https://zh.javascript.info/size-and-scroll-window" target="_blank" rel="noreferrer">ç°ä»£JSæ–‡æ¡£: size-and-scroll-window</a><a href="https://www.runoob.com/jqueryui/example-resizable.html" target="_blank" rel="noreferrer">Jquery æ‹–æ‹½ resize</a></p></blockquote><h1 id="web-worker" tabindex="-1">Web Worker <a class="header-anchor" href="#web-worker" aria-label="Permalink to &quot;Web Worker&quot;">â€‹</a></h1><p>æµè§ˆå™¨ä¸­ JavaScript å¼•æ“æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ã€‚ä¹Ÿå°±æ˜¯åœ¨åŒä¸€æ—¶é—´å†…åªèƒ½æœ‰ä¸€æ®µä»£ç è¢« JavaScript å¼•æ“æ‰§è¡Œã€‚å¦‚æœåŒä¸€æ—¶é—´è¿˜æœ‰å…¶å®ƒä»£ç éœ€è¦æ‰§è¡Œçš„è¯ï¼Œåˆ™è¿™äº›ä»£ç éœ€è¦ç­‰å¾… JavaScript å¼•æ“æ‰§è¡Œå®Œæˆå½“å‰çš„ä»£ç ä¹‹åæ‰æœ‰å¯èƒ½è·å¾—è¢«æ‰§è¡Œçš„æœºä¼šã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒJavaScript å¼•æ“ä¼šé¡ºåºæ‰§è¡Œé¡µé¢ä¸Šçš„æ‰€æœ‰ JavaScript ä»£ç ã€‚å½“é¡µé¢åŠ è½½å®Œæˆä¹‹åï¼ŒJavaScript å¼•æ“ä¼šè¿›å…¥ç©ºé—²çŠ¶æ€ã€‚ç”¨æˆ·åœ¨é¡µé¢ä¸Šçš„æ“ä½œä¼šè§¦å‘ä¸€äº›äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶çš„å¤„ç†æ–¹æ³•ä¼šäº¤ç»™ JavaScript å¼•æ“æ¥æ‰§è¡Œã€‚ç”±äº JavaScript å¼•æ“çš„å•çº¿ç¨‹ç‰¹æ€§ï¼Œä¸€èˆ¬ä¼šåœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå¾…å¤„ç†çš„äº‹ä»¶é˜Ÿåˆ—ã€‚æ¯æ¬¡ä»äº‹ä»¶é˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªäº‹ä»¶å¤„ç†æ–¹æ³•æ¥æ‰§è¡Œã€‚å¦‚æœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰æ–°çš„äº‹ä»¶å‘ç”Ÿï¼Œåˆ™æ–°äº‹ä»¶çš„å¤„ç†æ–¹æ³•åªä¼šè¢«åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ­£åœ¨æ‰§è¡Œçš„äº‹ä»¶å¤„ç†æ–¹æ³•éå¸¸è€—æ—¶ï¼Œåˆ™é˜Ÿåˆ—ä¸­çš„å…¶å®ƒäº‹ä»¶å¤„ç†æ–¹æ³•å¯èƒ½é•¿æ—¶é—´æ— æ³•å¾—åˆ°æ‰§è¡Œï¼Œé€ æˆç”¨æˆ·ç•Œé¢å¤±å»å“åº”ï¼Œä¸¥é‡å½±å“ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚</p><ul><li><p>ä¸»çº¿ç¨‹<strong>å¼‚æ­¥</strong>åˆ›å»º web workerï¼Œä¸»çº¿ç¨‹ä»£ç ä¸ä¼šé˜»å¡åœ¨è¿™é‡Œç­‰å¾… worker çº¿ç¨‹å»åŠ è½½ã€æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬æ–‡ä»¶ï¼Œè€Œæ˜¯ä¼šç«‹å³å‘ä¸‹ç»§ç»­æ‰§è¡Œåé¢ä»£ç ã€‚</p></li><li><p>Web Worker è‡ªèº«æ˜¯ç”± webkit(æµè§ˆå™¨å†…æ ¸) å¤šçº¿ç¨‹å®ç°ï¼Œä½†å®ƒå¹¶æ²¡æœ‰ä¸º JavaScript è¯­è¨€å¸¦æ¥å¤šçº¿ç¨‹ç¼–ç¨‹ç‰¹æ€§ï¼Œæˆ‘ä»¬ç°åœ¨ä»ç„¶ä¸èƒ½åœ¨ JavaScript ä»£ç ä¸­åˆ›å»ºå¹¶ç®¡ç†ä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ–è€…ä¸»åŠ¨æ§åˆ¶çº¿ç¨‹é—´çš„åŒæ­¥ä¸é”ç­‰ç‰¹æ€§ã€‚</p></li></ul><p>åœ¨æˆ‘çœ‹æ¥ï¼ŒWeb Worker æ˜¯ worker ç¼–ç¨‹æ¨¡å‹åœ¨æµè§ˆå™¨ç«¯ JavaScript è¯­è¨€ä¸­çš„åº”ç”¨ã€‚æµè§ˆå™¨çš„è¿è¡Œæ—¶, åŒå…¶ä»– GUI ç¨‹åºç±»ä¼¼ï¼Œæ ¸å¿ƒé€»è¾‘åƒæ˜¯ä¸‹é¢è¿™ä¸ªæ— é™å¾ªç¯:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#A6ACCD;">(</span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 1 æ›´æ–°æ•°æ®å’Œå¯¹è±¡çŠ¶æ€  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 2 æ¸²æŸ“å¯è§†åŒ–UI  </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>åœ¨ Web Worker ä¹‹å‰ï¼ŒJavaScript æ‰§è¡Œå¼•æ“åªèƒ½åœ¨ä¸€ä¸ªå•çº¿ç¨‹ç¯å¢ƒä¸­å®Œæˆè¿™ä¸¤é¡¹ä»»åŠ¡ã€‚è€Œåœ¨å…¶ä»–å…¸å‹ GUI æ¡†æ¶ï¼Œå¦‚å‰æ–‡ Swing åº“ä¸­ï¼Œæ—©å·²å¼•å…¥äº† Swing Worker æ¥è§£å†³å¤§é‡è®¡ç®—å¯¹ UI æ¸²æŸ“çš„é˜»å¡é—®é¢˜ã€‚Web Worker çš„å¼•å…¥ï¼Œæ˜¯å€Ÿé‰´äº† worker ç¼–ç¨‹æ¨¡å‹ï¼Œç»™å•çº¿ç¨‹çš„ JavaScript å¸¦æ¥äº†åå°è®¡ç®—çš„èƒ½åŠ›ã€‚</p><blockquote><p>å‚è€ƒ</p></blockquote><ul><li><a href="http://www.alloyteam.com/2015/11/deep-in-web-worker/#prettyPhoto" target="_blank" rel="noreferrer">è…¾è®¯å…¨ç«¯ AlloyTeam-Web Worker</a></li><li><a href="https://www.ibm.com/developerworks/cn/web/1105_chengfu_jsworker/index.html" target="_blank" rel="noreferrer">JS å·¥ä½œçº¿ç¨‹å®ç°æ–¹å¼-setTimeout &amp; web worker</a> setTimeout &amp; setInterval æ‰§è¡Œè¿‡ç¨‹ï¼›</li></ul><h1 id="å®ç°åŠ¨ç”»çš„æ–¹æ³•" tabindex="-1">å®ç°åŠ¨ç”»çš„æ–¹æ³• <a class="header-anchor" href="#å®ç°åŠ¨ç”»çš„æ–¹æ³•" aria-label="Permalink to &quot;å®ç°åŠ¨ç”»çš„æ–¹æ³•&quot;">â€‹</a></h1><ol><li>css: transition animation</li><li>js: setTimeoutã€setIntervalã€requestAnimationFrame</li><li><strong>html5: canvas ?</strong></li></ol><blockquote><p>å‚è€ƒ</p></blockquote><ul><li><a href="https://threejs.org/examples/#webgl_decals" target="_blank" rel="noreferrer">ä¸‰ç»´åŠ¨ç”»åº“</a></li><li><a href="https://www.cnblogs.com/coco1s/p/15009605.html" target="_blank" rel="noreferrer">å¸¦åœ†è§’çš„ä¸‰è§’å½¢-åŠ¨ç”»</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Basic_animations" target="_blank" rel="noreferrer">Animation</a></li></ul><h1 id="ç‰¹æ®Šè¿ç®—ç¬¦" tabindex="-1">ç‰¹æ®Šè¿ç®—ç¬¦ <a class="header-anchor" href="#ç‰¹æ®Šè¿ç®—ç¬¦" aria-label="Permalink to &quot;ç‰¹æ®Šè¿ç®—ç¬¦&quot;">â€‹</a></h1><blockquote><p><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Operators/Optional_chaining" target="_blank" rel="noreferrer">å¯é€‰é“¾ ç©ºå€¼è¿ç®—ç¬¦</a></p></blockquote><blockquote><p>void 0 &amp; undefined</p></blockquote><p>undefined ä¸æ˜¯ JS ä¸­çš„ä¿ç•™å­—ï¼Œè€Œæ˜¯å…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œåœ¨ ES5 ä¹‹å‰æ˜¯å¯ä¿®æ”¹çš„ï¼ˆ<code>undefined = 1</code>ï¼‰ï¼ŒES5 ä¹‹åä¿®æ”¹ä¸ºåªè¯»å±æ€§ï¼Œä½†æ˜¯åœ¨å±€éƒ¨ä½œç”¨åŸŸå†…ä¾ç„¶å¯ä»¥è¦†ç›– undefined çš„å€¼ï¼Œå¦‚ï¼š<code>const undefined = 1;</code>ã€‚</p><blockquote><p>new this</p></blockquote><p>ä½¿ç”¨ <code>new</code> å®ä¾‹åŒ–å¯¹è±¡æ—¶æ„é€ å‡½æ•°å†…éƒ¨<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new#description" target="_blank" rel="noreferrer">æ‰§è¡Œæ­¥éª¤</a></p><ul><li>è‹¥æ‰§è¡Œ new Foo()ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</li></ul><p>1ï¼‰åˆ›å»ºæ–°å¯¹è±¡ oï¼› 2ï¼‰ç»™æ–°å¯¹è±¡çš„å†…éƒ¨å±æ€§èµ‹å€¼ï¼Œå…³é”®æ˜¯ç»™[[Prototype]]å±æ€§èµ‹å€¼ï¼Œæ„é€ åŸå‹é“¾ï¼ˆå¦‚æœæ„é€ å‡½æ•°çš„åŸå‹æ˜¯ Object ç±»å‹ï¼Œåˆ™æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹ï¼›ä¸ç„¶æŒ‡å‘ Object å¯¹è±¡çš„åŸå‹ï¼‰ï¼› 3ï¼‰æ‰§è¡Œå‡½æ•° Fooï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­å†…éƒ¨ this æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ oï¼› 4ï¼‰å¦‚æœ Foo å†…éƒ¨æ˜¾å¼è¿”å›å¯¹è±¡ç±»å‹æ•°æ®ï¼Œåˆ™è¿”å›è¯¥æ•°æ®ï¼›å¦åˆ™è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ oã€‚</p><ul><li>åœ¨ Person å‡½æ•°ä½“ä¸­åˆ¤æ–­å‡½æ•°æ˜¯å¦å·² <code>new</code> è°ƒç”¨</li></ul><ol><li><code>this instanceof Person</code></li><li>ES6 ç¯å¢ƒä¸‹: <code>new.target === Person</code></li></ol><h1 id="string" tabindex="-1">String <a class="header-anchor" href="#string" aria-label="Permalink to &quot;String&quot;">â€‹</a></h1><blockquote><p>æ¦‚å¿µ</p></blockquote><p>16ä½ Unicode å­—ç¬¦ | åŒå­—èŠ‚å­—ç¬¦</p><p>UTF-16 æœ€å¤šèƒ½è¡¨ç¤º 2^16=65536 ä¸ªå­—ç¬¦ï¼Œ è¿™ 65536 ä¸ªå­—ç¬¦ç§°ä¸º basic multilingual plane (BMP) å­—ç¬¦é›†ï¼Œå¯ä»¥ç”¨ <code>\\uxxxx</code> è¡¨ç¤ºã€‚</p><p>Unicode code points range from 0 to 1114111 (0x10FFFF). The first 128 Unicode code points are a direct match of the ASCII character encoding.</p><p>Unicode å­—ç¬¦é›†è¿œå¤§äº 65536ï¼Œè¶…è¿‡çš„å­—ç¬¦å°±ç”¨ä¸¤ä¸ª UTF-16 ç¼–ç å•å…ƒ(4å­—èŠ‚)è¡¨ç¤ºï¼Œè¿™ä¸¤ä¸ªç¼–ç å•å…ƒæ¯ä¸ªçš„å–å€¼åœ¨ 0xD800 - 0xDFFF èŒƒå›´ã€‚</p><p>æ¯ä¸ª Unicode å­—ç¬¦ç”±ä¸€ä¸ªæˆ–ä¸¤ä¸ª UTF-16 ç¼–ç å•å…ƒè¡¨ç¤ºï¼Œåˆç§° <strong>Unicode code point</strong>ï¼Œç”¨ <code>\\u{xxxx}</code> 1åˆ°6ä½16è¿›åˆ¶æ•°è¡¨ç¤ºã€‚</p><p>&quot;unicode&quot;: &quot;2764 FE0F&quot;, &quot;icon&quot;: &quot;â¤ï¸&quot;</p><p>&quot;unicode&quot;: &quot;1F525&quot;, &quot;icon&quot;: &quot;ğŸ”¥&quot;</p><ul><li><p>ğŸ˜€</p><ul><li>length: 2</li><li>uncode: <code>[\\uD83D, \\uDE00]</code> =&gt; [55357, 56832]</li><li>è½¬ä¹‰è¡¨ç¤º: <code>\\u{1f600}</code></li></ul></li><li><p>a</p><ul><li>ASCII: 97 0x60</li><li>è½¬ä¹‰è¡¨ç¤º: <code>\\u0061</code> æˆ– <code>\\u{61}</code></li></ul></li></ul><blockquote><p>æ–¹æ³•</p></blockquote><ul><li>String.prototype.charCodeAt String.fromCharCode ==&gt; UTF-16 code unit</li><li>String.prototype.codePointAt String.fromCodePoint ==&gt; Unicode code point</li><li>btoa atob <a href="https://developer.mozilla.org/en-US/docs/Web/API/btoa" target="_blank" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/API/btoa</a></li></ul><blockquote><p>å‚è€ƒ</p></blockquote><p><a href="https://zh.javascript.info/unicode" target="_blank" rel="noreferrer">Unicode-javascript.info</a></p><h1 id="number" tabindex="-1">Number <a class="header-anchor" href="#number" aria-label="Permalink to &quot;Number&quot;">â€‹</a></h1><p>åœ¨å†…éƒ¨ï¼Œæ•°å­—æ˜¯ä»¥ 64 ä½æ ¼å¼ IEEE-754 è¡¨ç¤ºçš„ï¼Œæ‰€ä»¥æ­£å¥½æœ‰ 64 ä½å¯ä»¥å­˜å‚¨ä¸€ä¸ªæ•°å­—ï¼š1ä¸ªç¬¦å·ä½ã€11ä¸ªæŒ‡æ•°ä½ï¼ˆexponentï¼‰ã€52ä¸ªå°æ•°ä½ï¼ˆmantissaï¼‰ã€‚</p><p><img src="`+p+`" alt="image-20230215135713259"></p><p><code>e</code> ç­‰äº 11 ä½æŒ‡æ•°ä½è¡¨ç¤ºçš„æ•°ï¼Œæœ€å¤§ä¸º 2^11-1-1=1023ï¼Œæœ€å°ä¸º1</p><p>11 ä½æŒ‡æ•°æœ‰ä¸¤ä¸ªç‰¹æ®Šæƒ…å†µ 1ï¼‰å…¨ä¸º0ï¼šå½“52ä½å°æ•°å…¨ä¸º0æ—¶è¡¨ç¤ºæ­£è´Ÿ0ï¼Œå¦åˆ™è¡¨ç¤ºéè§„èŒƒåŒ–æµ®ç‚¹æ•° 2ï¼‰å…¨ä¸º1ï¼šå½“52ä½å°æ•°å…¨ä¸º0æ—¶è¡¨ç¤ºæ­£è´Ÿæ— ç©·å¤§ï¼Œå¦åˆ™è¡¨ç¤º NaN</p><p>Integers can only be represented without loss of precision in the range <code>-2^53 + 1 to 2^53 - 1</code>ã€‚<span style="color:red;">å®é™…æµ‹è¯•ä¸º -2^53 åˆ° 2^53</span></p><p>æœ€å¤§å®‰å…¨æ•´æ•°ï¼šNumber.MAX_SAFE_INTEGER = 2^53</p><p><a href="https://en.wikipedia.org/wiki/Double-precision_floating-point_format" target="_blank" rel="noreferrer">åŒç²¾åº¦æµ®ç‚¹æ•°-Wiki</a></p><p>æœ€å¤§æ•´æ•° ç²¾åº¦ä¸¢å¤± isNaN isFinite</p><blockquote><p>è§£å†³ç²¾åº¦é—®é¢˜</p></blockquote><p><a href="https://github.com/josdejong/mathjs/" target="_blank" rel="noreferrer">mathjs</a><a href="https://github.com/nefe/number-precision" target="_blank" rel="noreferrer">number-precision</a></p><h1 id="eval" tabindex="-1">eval <a class="header-anchor" href="#eval" aria-label="Permalink to &quot;eval&quot;">â€‹</a></h1><p>å‚æ•°ï¼šé¢„æœŸæ˜¯å­—ç¬¦ä¸² è¿”å›å€¼ï¼šè‹¥å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¿”å›å€¼å°±æ˜¯å­—ç¬¦ä¸²æ‰§è¡Œçš„ç»“æœï¼Œå¦åˆ™è¿”å›å€¼æ˜¯è¾“å…¥å‚æ•°æœ¬èº«</p><p>ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼š ç›´æ¥è°ƒç”¨ï¼š<code>eval()</code> é—´æ¥è°ƒç”¨ï¼š<code>eval?.()</code>ã€åˆ«åã€å¯¹è±¡å±æ€§ã€è¡¨è¾¾å¼</p><p>ç›´æ¥è°ƒç”¨ã€é—´æ¥è°ƒç”¨çš„åŒºåˆ«ï¼š</p><ul><li><p>æ˜¯å¦ç»§æ‰¿ä¸Šçº§ä½œç”¨åŸŸçš„ strict æ¨¡å¼</p><ul><li>é—´æ¥è°ƒç”¨ä¸ç»§æ‰¿ä¸Šçº§ä½œç”¨åŸŸçš„ &#39;use strict&#39; æ¨¡å¼ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªå£°æ˜äº† &#39;use strict&#39; çš„å‡½æ•°ä¸­ä»¥é—´æ¥çš„æ–¹å¼è°ƒç”¨ evalï¼Œeval ä¸­ä»£ç æ˜¯åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œ</li><li>ç›´æ¥è°ƒç”¨ä¼šç»§æ‰¿ strict æ¨¡å¼</li></ul></li><li><p>æ‰§è¡Œç¯å¢ƒï¼ˆä½œç”¨åŸŸï¼‰</p><ul><li>é—´æ¥è°ƒç”¨çš„æ‰§è¡Œä½œç”¨åŸŸä¸ºå…¨å±€ä½œç”¨åŸŸï¼Œeval ä¸­çš„ script ä¸èƒ½è®¿é—®å±€éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡</li><li>ç›´æ¥è°ƒç”¨çš„ä½œç”¨åŸŸä¸ºï¼Ÿ</li><li>ç›´æ¥è°ƒç”¨çš„ eval å¯ä»¥è®¿é—®è®¿é—®å…¶ä»–ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ã€å±é™©ï¼Œå¯èƒ½ä¿®æ”¹å±€éƒ¨å˜é‡ã€‘</li></ul></li><li><p>å˜é‡å£°æ˜å’Œå‡½æ•°å£°æ˜</p><ul><li>åœ¨é strict æ¨¡å¼ä¸‹ï¼Œå¯¹äºç›´æ¥è°ƒç”¨å½¢å¼ï¼Œvarå£°æ˜çš„å˜é‡å’Œå‡½æ•°å±äºä¸Šçº§ä½œç”¨åŸŸ(surrounding scope)ï¼Œeval ä¸­çš„ä»£ç å¯èƒ½ä¿®æ”¹å¤–éƒ¨çš„å˜é‡å€¼ï¼›å¯¹äºé—´æ¥è°ƒç”¨ï¼Œvarå£°æ˜çš„å˜é‡å’Œå‡½æ•°å±äºå…¨å±€ä½œç”¨åŸŸ</li><li>åœ¨ strict æ¨¡å¼ä¸‹ï¼Œvarå£°æ˜çš„å˜é‡å’Œå‡½æ•°å±äºå±€éƒ¨ä½œç”¨åŸŸï¼Œå’Œè°ƒç”¨æ–¹å¼æ— å…³</li><li>let å’Œ const å£°æ˜çš„å˜é‡å§‹ç»ˆå±äºå±€éƒ¨ä½œç”¨åŸŸ</li><li>ç›´æ¥ eval ä¼šè¯»å–å’Œä¿®æ”¹å‘¨å›´ä½œç”¨åŸŸä¸­çš„ç»‘å®šï¼Œè¿™å¯èƒ½å¯¼è‡´å¤–éƒ¨è¾“å…¥ç ´åæœ¬åœ°æ•°æ®ã€‚</li></ul></li></ul><h1 id="æ±‚å€¼ç­–ç•¥" tabindex="-1">æ±‚å€¼ç­–ç•¥ <a class="header-anchor" href="#æ±‚å€¼ç­–ç•¥" aria-label="Permalink to &quot;æ±‚å€¼ç­–ç•¥&quot;">â€‹</a></h1><p>æ±‚å€¼ç­–ç•¥æœ‰ä¸¤ç§ï¼š</p><ul><li>ä¼ å€¼è°ƒç”¨ï¼Œå…ˆæŠŠå˜é‡çš„å€¼è®¡ç®—å‡ºæ¥ï¼Œç„¶åç›´æ¥ä½¿ç”¨è®¡ç®—å‡ºæ¥çš„å€¼</li><li>ä¼ åè°ƒç”¨ï¼Œç­‰åˆ°éœ€è¦å˜é‡çš„å€¼æ—¶æ‰è®¡ç®—</li></ul><p>JS é‡‡ç”¨çš„ä¼ å€¼è°ƒç”¨ï¼ŒECMAScript ä¸­æ‰€æœ‰çš„å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">n</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">n</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> a)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç»“æœï¼š</span></span>
<span class="line"><span style="color:#FFCB6B;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;">n</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;">n</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">x</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;">n</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">}}</span></span></code></pre></div>`,92),c=[r];function i(D,y,F,d,C,A){return l(),a("div",null,c)}const g=s(t,[["render",i]]);export{h as __pageData,g as default};
