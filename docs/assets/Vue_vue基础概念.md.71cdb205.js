import{_ as s,o as a,c as n,V as l}from"./chunks/framework.33d73f2c.js";const p="/assets/vue组件核心概念.7bb1d6c2.jpeg",o="/assets/vue响应式更新.a641a0ae.png",h=JSON.parse('{"title":"组件","description":"","frontmatter":{},"headers":[],"relativePath":"Vue/vue基础概念.md","filePath":"Vue/vue基础概念.md","lastUpdated":1691037194000}'),e={name:"Vue/vue基础概念.md"},t=l(`<blockquote><ul><li><p>什么是字符串模板：单文件中的template 和 实例化vue对象时的template 属性。</p></li><li><p>DOM 模板：在 html 文件中编写的html标签(包含自定义标签)，直接在DOM中使用组件。</p></li><li><p>html 属性名和属性值</p></li></ul></blockquote><ul><li><p>vue 实例属性：<code>data、computed、methods、props</code> 中的属性都挂载到 vue 实例的一级属性上。</p></li><li><p><code>computed</code> 可以依赖多个vue 实例属性，并根据依赖进行缓存。</p></li><li><p>指令：指令可以带参数和修饰符，指令绑定的表达式。指令的值是多少？</p></li><li><p>Vue 推荐在绝大多数情况下使用<strong>模板</strong>来创建你的 HTML。然而在一些场景中，你真的需要 JavaScript 的完全编程的能力。这时你可以用<strong>渲染函数</strong>，它比模板更接近编译器。</p></li><li><p>Vue 的模板实际上被编译成了渲染函数</p></li></ul><h1 id="组件" tabindex="-1">组件 <a class="header-anchor" href="#组件" aria-label="Permalink to &quot;组件&quot;">​</a></h1><blockquote><p>组件是可复用的 Vue 实例</p><p>根实例特有选项: el</p></blockquote><p>创建组件的方式有哪些？</p><ul><li><p>使用 Vue.component 或 Vue.extend 定义组件</p></li><li><p>全局注册</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Vue.component(&#39;my-component-name&#39;, {</span></span>
<span class="line"><span style="color:#A6ACCD;">  // ... options ...</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span></code></pre></div></li></ul><p>函数式组件和类组件：函数式组件只是函数，所以渲染开销也低很多</p><p>vue-class-component 和 vue-property-decorator</p><p>vm 表示实例，h 表示 createElement</p><p>组件的选项对象</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Vue</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">el</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#app</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello Vue!</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>为了能在模板中使用，这些组件必须先注册以便 Vue 能够识别。这里有两种组件的注册类型：全局注册和局部注册。</p><p>// 定义一个名为 button-counter 的新组件</p><p>// 全局注册：全局注册的行为必须在根 Vue 实例 (通过 new Vue) 创建之前发生</p><p>html 的属性名不区分大小写，都是小写</p><p>html 属性值只能是字符串？</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Vue.component(&#39;button-counter&#39;, {</span></span>
<span class="line"><span style="color:#A6ACCD;">  data() {</span></span>
<span class="line"><span style="color:#A6ACCD;">    return {</span></span>
<span class="line"><span style="color:#A6ACCD;">      count: 0</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  },</span></span>
<span class="line"><span style="color:#A6ACCD;">  props: [&#39;title&#39;],</span></span>
<span class="line"><span style="color:#A6ACCD;">  template: </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">v-on</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">++</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">You clicked me {{ count }} times.</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;">// ***********************************************************</span></span>
<span class="line"><span style="color:#A6ACCD;">props: [&#39;initialCounter&#39;],</span></span>
<span class="line"><span style="color:#A6ACCD;">data(){</span></span>
<span class="line"><span style="color:#A6ACCD;">  return {</span></span>
<span class="line"><span style="color:#A6ACCD;">    counter: this.initialCounter</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="动态组件" tabindex="-1"><a href="https://cn.vuejs.org/v2/guide/components.html#%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6" target="_blank" rel="noreferrer">动态组件</a> <a class="header-anchor" href="#动态组件" aria-label="Permalink to &quot;[动态组件](https://cn.vuejs.org/v2/guide/components.html#%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6)&quot;">​</a></h2><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">tbody</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">is</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">my-cmp</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">tbody</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p><code>tbody</code> 在渲染时被替换为<code>my-cmp</code> 组件</p><p>$emit ==&gt; $event</p><p>自定义事件(非click)</p><ul><li>$emit：触发一个事件</li><li>$event：</li></ul><hr><h1 id="vue组件三大核心概念" tabindex="-1">vue组件三大核心概念 <a class="header-anchor" href="#vue组件三大核心概念" aria-label="Permalink to &quot;vue组件三大核心概念&quot;">​</a></h1><img src="`+p+`" alt="vue组件核心概念" style="zoom:67%;"><ul><li><p>原生组件(也叫 HTML 元素)的构成：<code>&lt;div id=&#39;app&#39; style=&#39;width:70%&#39;&gt;内容&lt;/div&gt;</code>，开始标签、内容、结束标签、属性(特性)、属性值；自定义组件也由这些部分构成。</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--使用自定义组件--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">my-component</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">czl</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- 此处为组件内容，通过slot插槽传递 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">my-component</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><blockquote><ul><li>一个 Vue 应用由一个通过 new Vue 创建的<strong>根 Vue 实例</strong>，以及可选组件树组成；</li><li>在 Vue 里，一个组件本质上是一个拥有预定义选项的一个 <strong>Vue 实例</strong>，每个组件都会各自独立维护它的 data对象。因为你每用一次组件，就会有一个它的新<strong>实例</strong>被创建，所以data对象是通过函数返回；</li><li>在组件上使用<strong>v-for</strong>时，<strong>key</strong> 是必须提供的；</li><li><strong>组件有自己独立的作用域，<strong>数据不会传递到组件内 ，因此使用</strong>props</strong>向组件内部传递数据；</li><li>不要在选项属性或回调上使用箭头函数；</li><li>Vue 将模板编译成虚拟 DOM 渲染函数；</li></ul></blockquote><p>Vue最核心的功能：数据的双向绑定，实时同步数据，数据驱动DOM。</p><ul><li><p>Q:数据双向绑定是哪两方数据?</p><ul><li>A:HTML元素数据(表单元素)--Vue实例中的data将元素的属性与属性值分离，其值存放在Vue实例中；用v-model、v-bind将元素属性与其属性值相互绑定。</li></ul></li><li><p>Vue创建的实例代理了data和method属性，所以可以直接通过实例（this.**）访问；</p></li><li><p>实例属性与方法用$开头来访问，如vueApp.$el可以访问元素；</p></li></ul><h2 id="vue构成" tabindex="-1">Vue构成 <a class="header-anchor" href="#vue构成" aria-label="Permalink to &quot;Vue构成&quot;">​</a></h2><ol><li>组件化</li><li>数据驱动 &amp; 状态管理(vuex)</li><li>指令</li></ol><h2 id="计算属性-watch" tabindex="-1">计算属性 &amp; watch <a class="header-anchor" href="#计算属性-watch" aria-label="Permalink to &quot;计算属性 &amp; watch&quot;">​</a></h2><ol><li>计算属性只能执行同步代码，计算属性根据响应式依赖进行缓存，当依赖的数据没有更新时，多次访问计算属性直接取缓存的值；</li><li>watch 可以执行异步操作；</li></ol><h2 id="_1-属性" tabindex="-1">1. 属性 <a class="header-anchor" href="#_1-属性" aria-label="Permalink to &quot;1. 属性&quot;">​</a></h2><p><strong>1.1 分类</strong></p><ul><li>自定义属性props</li><li>原生属性attrs</li><li>插槽props</li><li>特殊属性class、style</li></ul><p>data与props的区别？</p><p>单向数据流？</p><h3 id="vue为什么禁止修改父组件传递进来的props-又是如何监控到子组件修改了props" tabindex="-1">Vue为什么禁止修改父组件传递进来的props， 又是如何监控到子组件修改了props? <a class="header-anchor" href="#vue为什么禁止修改父组件传递进来的props-又是如何监控到子组件修改了props" aria-label="Permalink to &quot;Vue为什么禁止修改父组件传递进来的props， 又是如何监控到子组件修改了props?&quot;">​</a></h3><ul><li>因为Vue遵循单向数据流，模型(比如props数据)渲染视图，如果允许子组件修改父组件传递的值，那么同一父组件的其他子组件就会受影响，导致数据流向很混乱，所以禁止子组件修改props。可以通过父组件传递一个回调函数实现。Vue通过 <code>defineProperty</code> 定义属性的属性描述符中的<code>get</code>和<code>set</code>，当修改属性时判断是否是父组件触发的修改。</li></ul><h3 id="组件内部修改-props-的方法" tabindex="-1">组件内部修改 props 的方法 <a class="header-anchor" href="#组件内部修改-props-的方法" aria-label="Permalink to &quot;组件内部修改 props 的方法&quot;">​</a></h3><ol><li>拷贝至 data 或 计算属性，结合 emit 实现父组件更新；</li><li><code>sync</code> 修饰符；</li><li>将 props 包装为对象，因为 props 传递是引用；</li></ol><h2 id="_2-事件" tabindex="-1">2. 事件 <a class="header-anchor" href="#_2-事件" aria-label="Permalink to &quot;2. 事件&quot;">​</a></h2><ul><li>事件驱动 &amp; 数据驱动</li><li>普通事件 &amp; 修饰符事件</li></ul><p>在自定义组件上注册监听原生事件(如click)，使用 native 事件修饰符 <code>&lt;my-componenet @click.native=&quot;handle&quot;&gt;&lt;/my-component&gt;</code>；因为 my-component 不在DOM树上，添加的是组件内模板的代码(组件模板默认会继承非props特性)，如果没有 native 修饰，则原生的监听器(click)没有作用；注意自定义事件this.$emit不需要native修饰。</p><h2 id="_3-插槽" tabindex="-1">3. 插槽 <a class="header-anchor" href="#_3-插槽" aria-label="Permalink to &quot;3. 插槽&quot;">​</a></h2><ul><li>普通插槽</li><li>作用域插槽</li></ul><p>参考链接: <a href="https://mp.weixin.qq.com/s?__biz=Mzg5ODA5NTM1Mw==&amp;mid=2247483942&amp;idx=1&amp;sn=bb123cb4d34f94f79881f0fa226da26b&amp;chksm=c06683b0f7110aa6baf6e8ab59870a10fbf9a07083910054a25e67e50d306985103570d88ca2&amp;mpshare=1&amp;scene=1&amp;srcid=&amp;key=3e64675c4af2e8c1cb87133eea4dc87d7279f068d389ab5644397f9f2d0c1e1cd7e62cc0d356a7eed5b35b508b65ab0ee65bab9587ba98854bfbffa1c964800fab1fc979d082faa5ab76ece9c4c63431&amp;ascene=1&amp;uin=Mjc2NDI1NDU2NA%3D%3D&amp;devicetype=Windows+7&amp;version=62060739&amp;lang=zh_CN&amp;pass_ticket=S8Ujki2fz5qcjOi%2B1GEFSYgOxjQ%2BmiRmgp17ybRU2kbGBIyFXc%2FGjUjxA3p23gkD" target="_blank" rel="noreferrer">详解vue组件三大核心概念</a></p><h1 id="组件构成" tabindex="-1">组件构成 <a class="header-anchor" href="#组件构成" aria-label="Permalink to &quot;组件构成&quot;">​</a></h1><h2 id="props" tabindex="-1">props <a class="header-anchor" href="#props" aria-label="Permalink to &quot;props&quot;">​</a></h2><blockquote><p><code>props</code> 的 key &amp; value，类型、默认值、验证</p></blockquote><ul><li><p>props属性：定义组件时，在组件实例的props选项上声明的属性；可以通过<code>this.$props</code>获取该属性，直接使用<code>v-bind=$props</code>在<code>&lt;template&gt;</code>中的元素上进行绑定。</p></li><li><p>非props属性：使用组件时，定义了未在props选项上声明的属性；<code>$attrs</code> 可以访问非 <code>props</code> 属性。默认情况下，所有的非props属性被组件 <code>&lt;template&gt;</code> 的根元素继承；通过<code>inheritAttrs</code>设置根元素是否继承非<code>props</code>属性</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">my-component</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">czl</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">age</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">22</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#FFCB6B;">my-component</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">局部注册</span></span>
<span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Vue</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">el</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">components</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">myComponent</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">inheritAttrs</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">	默认为true            </span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;div id=&quot;root&quot;&gt;&lt;input v-bind=$attrs&gt;&lt;/div&gt;</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div></li></ul><h2 id="无参bind" tabindex="-1">无参bind <a class="header-anchor" href="#无参bind" aria-label="Permalink to &quot;无参bind&quot;">​</a></h2><ul><li><p>v-bind:参数=&#39;表达式&#39;</p></li><li><p>使用无参的bind指令可以一次动态绑定多个值，等价于将属性名作为参数</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">MyCom</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">v-bind</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">obj</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">/&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">obj: {</span></span>
<span class="line"><span style="color:#A6ACCD;">	name: &#39;czl&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">	age: 22</span></span>
<span class="line"><span style="color:#A6ACCD;">} </span></span>
<span class="line"><span style="color:#A6ACCD;">// 等价于 </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">MyCom</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">v-bind:name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">obj.name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:age</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">obj.age</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h2 id="slot" tabindex="-1">slot <a class="header-anchor" href="#slot" aria-label="Permalink to &quot;slot&quot;">​</a></h2><ul><li>slot：分发__内容__(元素由开始标签、结束标签和<strong>内容</strong>构成)，当有多个内容需要分发时，通过指定slot.name即具名slot实现。</li><li>插槽prop: 绑定在<code>&lt;slot&gt;</code>上的特性</li></ul><h2 id="watch监听引用数据" tabindex="-1">watch监听引用数据 <a class="header-anchor" href="#watch监听引用数据" aria-label="Permalink to &quot;watch监听引用数据&quot;">​</a></h2><ul><li><p>监听复杂数据(object、array)</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">watch</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#FFCB6B;">obj</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">deep</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">handle</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">newValue</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">oldValue</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">           </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">        </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li></ul><h2 id="keep-alive" tabindex="-1">keep-alive <a class="header-anchor" href="#keep-alive" aria-label="Permalink to &quot;keep-alive&quot;">​</a></h2><ul><li><p>将组件 <code>&lt;my-component&gt;</code> 进行缓存，避免每次重新渲染组件(create, mounte等)，用于路由及组件切换(动态组件<code>&lt;component v-bind:is=&quot;cmp&quot;&gt;</code> )。</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">keep-alive</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">my-component</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">my-component</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">keep-alive</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h2 id="native" tabindex="-1">native <a class="header-anchor" href="#native" aria-label="Permalink to &quot;native&quot;">​</a></h2><ul><li><p>若没有修饰符native，那下面的@click就是自定义事件click而非原生click</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">mycomponent</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@click.native</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">handleClick</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">mycomponent</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h1 id="key" tabindex="-1">key <a class="header-anchor" href="#key" aria-label="Permalink to &quot;key&quot;">​</a></h1><p>vue和react的虚拟DOM的Diff算法大致相同，其核心是基于两个简单的假设：</p><ol><li>两个相同的组件产生类似的DOM结构，不同的组件产生不同的DOM结构。</li><li>同一层级的一组节点，他们可以通过唯一的id进行区分。</li></ol><p>基于以上这两点假设，使得虚拟DOM的Diff算法的复杂度从O(n^3)降到了O(n)。</p><ul><li><code>key</code> 的作用是给予一个节点唯一的身份识别，有相同父元素的子元素必须有独特的 <code>key</code>，特别是列表渲染时的节点，因为相同的组件产生类似的DOM结构 。这样在使用Diff算法对新旧虚拟DOM进行比较时，计算出哪些节点是可以<strong>就地复用或者调整顺序</strong>，可以更高效的重用排序现有的元素；比较时，依次对比两个节点的类型、属性、子节点。</li><li>key的作用主要是为了高效的更新虚拟DOM。</li></ul><h1 id="组件通信" tabindex="-1">组件通信 <a class="header-anchor" href="#组件通信" aria-label="Permalink to &quot;组件通信&quot;">​</a></h1><ol><li>props &amp; emit：自定义属性和自定义事件</li><li>$refs、$parent、$children</li><li>provide &amp; inject</li><li>$attrs &amp; $listeners</li><li>Event Bus</li><li>vuex</li></ol><ul><li><a href="https://mp.weixin.qq.com/s?__biz=MjM5NTEwMTAwNg==&amp;mid=2650215866&amp;idx=1&amp;sn=c4cc189d145d5c358db61697ca70a82e&amp;chksm=befe159b89899c8d4ae785b5f63063434dc1279830c020d8b60985e8e6a36a2e55f93a2ac6d4&amp;scene=0&amp;key=2bb12b254a1b99044f1b54db34647d49c8c06f37b302512cea302a011df276cdf11973e6bbdd41b9ebfa174ff119d5b271bd567f7bbc5eb6a01718c24400c75602ee6810ea48253930f85fd15310ff25&amp;ascene=1&amp;uin=Mjc2NDI1NDU2NA%3D%3D&amp;devicetype=Windows+7&amp;version=62060739&amp;lang=zh_CN&amp;pass_ticket=Ssclv0EjFV5vOJWuvp4F%2F2EaOid5lYknyYjfJDT8vOG1egweHVyv%2ByaE%2BGO8rIc8" target="_blank" rel="noreferrer">SegmentFault参考</a></li></ul><h1 id="virtual-dom" tabindex="-1">Virtual DOM <a class="header-anchor" href="#virtual-dom" aria-label="Permalink to &quot;Virtual DOM&quot;">​</a></h1><h2 id="diff-算法" tabindex="-1">Diff 算法 <a class="header-anchor" href="#diff-算法" aria-label="Permalink to &quot;Diff 算法&quot;">​</a></h2><p>Diff 算法将时间复杂度从O(n3)减少到O(n)；</p><p>diff 算法包括几个步骤：</p><ol><li>用 JS 对象表示 DOM 树的结构，然后用这个树构建一个真正的 DOM 树，插到文档当中；</li><li>当状态变更的时候，重新构造一棵新的对象树，然后用新的树和旧的树进行比较(同层比较)，记录两棵树差异；</li><li>把所记录的差异应用到所构建的真正的DOM树上，视图就更新了；</li></ol><p>参考：</p><ul><li><a href="https://mp.weixin.qq.com/s?__biz=Mzg5ODA5NTM1Mw==&amp;mid=2247484031&amp;idx=1&amp;sn=ece0d952f7192b3d408da5fc68a880a4&amp;chksm=c06683e9f7110aff8b0b9f0cbbd5de34754c28c1176189964564ed5cd28a459e6f9e09be54d5&amp;mpshare=1&amp;scene=1&amp;srcid=&amp;key=3e64675c4af2e8c1434a938098a616e5abdb665d9e84903be474c86d977e282af3b8878d3952b0c28b6c2d63d63a00ed7195b0d74798baf1d7c34bd3d2ead3a110f204c293a0583dab0b48772f18fb87&amp;ascene=1&amp;uin=Mjc2NDI1NDU2NA%3D%3D&amp;devicetype=Windows+7&amp;version=62060833&amp;lang=zh_CN&amp;pass_ticket=WoiLyjX22pgkcex3J0Zr4C7XhoDMUgwrJ0I8gXuNREhi9k%2F0J3OO2IhX87FJPVXU" target="_blank" rel="noreferrer">揭秘Vue中的Virtual Dom</a></li></ul><h1 id="render-jsx-函数组件" tabindex="-1">render &amp; JSX &amp; 函数组件 <a class="header-anchor" href="#render-jsx-函数组件" aria-label="Permalink to &quot;render &amp; JSX &amp; 函数组件&quot;">​</a></h1><p>如何描述组件的UI和状态信息？</p><ol><li>字符串模板</li><li><strong><code>&lt;template&gt;</code></strong></li><li>render 函数</li></ol><p>这三中方法的作用都是一样的(可以相互替换)</p><h2 id="_1-render" tabindex="-1">1.render <a class="header-anchor" href="#_1-render" aria-label="Permalink to &quot;1.render&quot;">​</a></h2><p><u>render 函数</u></p><ul><li><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Vue</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">h</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">h</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">子节点</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// h 即 createElemnet</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div></li><li></li></ul><p><a href="https://cn.vuejs.org/v2/api/#render" target="_blank" rel="noreferrer">Vue官网API</a></p><ul><li><strong>createElement</strong> 的返回值是什么? createElement的返回的不是一个实际的 DOM 元素。它更准确的名字可能是 <code>createNodeDescription</code>，因为它所包含的信息会告诉 Vue 页面上需要渲染什么样的节点，包括及其子节点的描述信息。我们把这样的节点描述为“虚拟节点 (virtual node)”，也常简写它为“<strong>VNode</strong>”。“虚拟 DOM”是我们对由 Vue 组件树建立起来的整个 VNode 树的称呼。</li></ul><p><a href="#">render 和 template 的关联</a></p><ul><li>template 模板的来源？ 当 Vue 选项对象中有 render 渲染函数时，Vue 构造函数将直接使用渲染函数渲染 DOM 树，当选项对象中没有 render 渲染函数时，Vue 构造函数首先通过将 template 模板编译生成渲染函数，然后再渲染 DOM 树，而当 Vue 选项对象中既没有 render 渲染函数，也没有 template 模板时，会通过 el 属性获取挂载元素的 outerHTML 来作为模板，并编译生成渲染函数。</li></ul><h2 id="_2-函数式组件" tabindex="-1">2.函数式组件 <a class="header-anchor" href="#_2-函数式组件" aria-label="Permalink to &quot;2.函数式组件&quot;">​</a></h2><p>特点：</p><ol><li>声明了functional: true;</li><li>render(h, context); // 由第二个参数提供状态数据, h--&gt;createElement</li></ol><h2 id="_3-jsx" tabindex="-1">3.JSX <a class="header-anchor" href="#_3-jsx" aria-label="Permalink to &quot;3.JSX&quot;">​</a></h2><p><strong>JSX只是JS的语法扩展，在JS文件中使用。</strong></p><p><strong>插件</strong>：@vue/babel-preset-jsx @vue/babel-helper-vue-jsx-merge-props</p><p><a href="https://github.com/vuejs/jsx#installation" target="_blank" rel="noreferrer">https://github.com/vuejs/jsx#installation</a></p><p><strong>Demo：</strong></p><ul><li><p>render(h, ctx)中第一个参数在某些版本下只能用名称h，详细见**<a href="./[https://cn.vuejs.org/v2/guide/render-function.html#函数式组件](https://cn.vuejs.org/v2/guide/render-function.html#函数式组件)">Vue-函数式组件</a>**</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">VNode</span><span style="color:#89DDFF;"> :vnodes=&quot;getJSXSpan()&quot; </span><span style="color:#C792EA;">info</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">info</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">/&gt;&lt;</span><span style="color:#F07178;">hr</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">export default </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">components: </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 函数组件</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">VNode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">functional</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 第一种使用方法</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">render</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">h</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">ctx</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">h</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">div</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                style</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                    color</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">blue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">                attrs</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                    id</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">funCom</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> [</span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">vnodes</span><span style="color:#F07178;">])</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 第二种使用方法</span></span>
<span class="line"><span style="color:#A6ACCD;">        render: </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">h</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">ctx</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> ctx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">vnodes</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 第三种使用方法</span></span>
<span class="line"><span style="color:#A6ACCD;">        render: </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">h</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">ctx</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">            </span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">type</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">info</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// return h(type, ctx.data, ctx.children);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">FC</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">FC</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">info</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">info</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">未定义</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">                    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">type</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">func-comp</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> {...</span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">}&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">span</span><span style="color:#89DDFF;">&gt;{</span><span style="color:#A6ACCD;"> ctx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">children </span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">span</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">                )                </span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">methods: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">getJSXSpan</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    	</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">span</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Message: </span><span style="color:#89DDFF;">{this.</span><span style="color:#A6ACCD;">msg</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">span</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">script</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><h3 id="render-函数与模板编译-运行时构建-独立构建" tabindex="-1"><a href="https://zhuanlan.zhihu.com/p/25486761" target="_blank" rel="noreferrer">render 函数与模板编译：运行时构建 &amp; 独立构建</a> <a class="header-anchor" href="#render-函数与模板编译-运行时构建-独立构建" aria-label="Permalink to &quot;[render 函数与模板编译：运行时构建 &amp; 独立构建](https://zhuanlan.zhihu.com/p/25486761)&quot;">​</a></h3><hr><p>当使用 <code>vue-loader</code> 或 <code>vueify</code> 的时候，<code>*.vue</code> 文件内部的模板会在构建时预编译成 JavaScript。你在最终打好的包里实际上是不需要编译器的，所以只用运行时版本即可。</p><h1 id="vue实例" tabindex="-1">vue实例 <a class="header-anchor" href="#vue实例" aria-label="Permalink to &quot;vue实例&quot;">​</a></h1><p>当一个 Vue 实例被创建时，它将 <code>data</code> 对象中的所有的属性加入到 Vue 的<strong>响应式系统</strong>中。当这些属性的值发生改变时，视图将会产生“响应”，即匹配更新为新的值。当这些数据改变时，视图会进行重渲染。值得注意的是只有当实例被创建时就已经存在于 <code>data</code> 中的属性才是<strong>响应式</strong>的。也就是说如果你添加一个新的属性，</p><h2 id="模板" tabindex="-1">模板 <a class="header-anchor" href="#模板" aria-label="Permalink to &quot;模板&quot;">​</a></h2><ul><li><p>绑定的数据对象不必内联定义在模板里</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">v-bind</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">classObject</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li><li><p>注意这里的 <code>is=&quot;todo-item&quot;</code> 属性。这种做法在使用 DOM 模板时是十分必要的，因为在 <code>&lt;ul&gt;</code> 元素内只有 <code>&lt;li&gt;</code> 元素会被看作有效内容。这样做实现的效果与 <code>&lt;todo-item&gt;</code> 相同，但是可以避开一些潜在的浏览器解析错误。查看 <a href="https://cn.vuejs.org/v2/guide/components.html#%E8%A7%A3%E6%9E%90-DOM-%E6%A8%A1%E6%9D%BF%E6%97%B6%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" target="_blank" rel="noreferrer">DOM 模板解析说明</a> 来了解更多信息。</p></li></ul><p>需要注意的是<strong>如果我们从以下来源使用模板的话，这条限制是不存在的</strong>：</p><ul><li><p>字符串 (例如：<code>template: &#39;...&#39;</code>)</p></li><li><p><a href="https://cn.vuejs.org/v2/guide/single-file-components.html" target="_blank" rel="noreferrer">单文件组件 (<code>.vue</code>)</a></p></li><li><p><code>&lt;script type=&quot;text/x-template&quot;&gt;</code></p></li></ul><p>当直接在 DOM 中使用一个组件 (而不是在字符串模板或<a href="https://cn.vuejs.org/v2/guide/single-file-components.html" target="_blank" rel="noreferrer">单文件组件</a>) 的时候，我们强烈推荐遵循 <a href="https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name" target="_blank" rel="noreferrer">W3C 规范</a>中的自定义组件名 (字母全小写且必须包含一个连字符)。这会帮助你避免和当前以及未来的 HTML 元素相冲突。</p><ul><li><p>不要在选项属性或回调上使用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noreferrer">箭头函数</a>，比如 <code>created: () =&gt; console.log(this.a)</code> 或 <code>vm.$watch(&#39;a&#39;, newValue =&gt; this.myMethod())</code>。因为箭头函数并没有 <code>this</code>，<code>this</code> 会作为变量一直向上级词法作用域查找，直至找到为止；</p></li><li><p>计算属性：基于响应式依赖进行缓存，当依赖的数据没有更新时，不会执行函数； 计算属性默认只有getter</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">computed</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">fullName</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// getter</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">get</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">firstName</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">lastName</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// setter</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">set</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">newValue</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">names</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newValue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">firstName</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">names</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">lastName</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">names</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">names</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li></ul><h1 id="vue-响应式原理" tabindex="-1">vue 响应式原理 <a class="header-anchor" href="#vue-响应式原理" aria-label="Permalink to &quot;vue 响应式原理&quot;">​</a></h1><img src="`+o+'" alt="vue响应式更新" style="zoom:50%;"><p>创建一个vue 实例时，vue 遍历data 对象的属性，并使用 defineProperty 将属性转换为 getter\\setter (vue3.0 使用 Proxy)，当属性被访问或修改时触发更新(使用了发布订阅模式)。</p><p>每个组件实例都对应一个 <strong>watcher</strong> 实例，它会在组件渲染的过程中把“接触”过的数据属性记录为依赖。之后当依赖项的 setter 触发时，会通知 watcher，从而使它关联的组件重新渲染。</p><h2 id="异步更新队列" tabindex="-1">异步更新队列 <a class="header-anchor" href="#异步更新队列" aria-label="Permalink to &quot;异步更新队列&quot;">​</a></h2><blockquote><p><a href="https://cn.vuejs.org/v2/guide/reactivity.html#%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E9%98%9F%E5%88%97" target="_blank" rel="noreferrer">vue官网</a></p></blockquote><h2 id="参考-1" tabindex="-1">参考 <a class="header-anchor" href="#参考-1" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li><a href="https://cn.vuejs.org/v2/guide/reactivity.html" target="_blank" rel="noreferrer">深入响应式原理-vue官网</a></li></ul>',118),c=[t];function r(i,D,F,y,d,u){return a(),n("div",null,c)}const A=s(e,[["render",r]]);export{h as __pageData,A as default};
