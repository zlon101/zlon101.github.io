<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.22.0"/><style data-href="/styles.d5f14f6e2b75cb629231.css" data-identity="gatsby-global-css">@-webkit-keyframes silde{0%{background-color:green}50%{background-color:blue}to{background-color:red}}@keyframes silde{0%{background-color:green}50%{background-color:blue}to{background-color:red}}.p-debug{margin:40px auto 0;outline:1px solid red;overflow:auto;padding:16px;position:relative;width:70vw}.p-debug .animation{background-color:red;height:200px;width:200px}.p-debug .animation.active{-webkit-animation:silde 10s infinite;animation:silde 10s infinite}.c-header{align-items:center;background-color:#fff;border-bottom:2px solid #eaecef;display:flex;height:48px;left:0;padding:8px 16px;position:fixed;top:0;width:100%;z-index:1000}.c-header>*{cursor:pointer;font-size:18px;font-weight:600;margin-right:18px}.c-header>:last-child{margin-left:auto;margin-right:0}.c-nav{min-height:calc(100vh - 48px);overflow:auto;padding:16px 16px 16px 0;position:-webkit-sticky;position:sticky;top:48px}.c-nav .file-item{display:block;margin:8px 0;white-space:nowrap}.c-nav .file-item.fold>.file-name:after{border-color:transparent transparent transparent #ccc;border-style:solid;border-width:6px 0 6px 9px;content:"";display:inline-block;height:0;margin-left:8px;transition:all .2s ease-out;width:0}.c-nav .file-item.fold.expand>.file-name:after{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.c-nav .file-item.fold.expand>.child-list{display:block}.c-nav .file-name{border-left:4px solid transparent;color:#2c3e50;cursor:pointer;display:block;font-size:18px;font-weight:700;margin-bottom:12px;padding-left:16px;position:relative}.c-nav .file-name.light{color:#3eaf7c;font-size:20px}.c-nav .child-list{display:none;margin:0;padding-left:16px;transition:all .2s ease-out}.c-layout-sidebar-content{display:flex;position:relative}.c-layout-sidebar-content .article-wrap{flex:1 1 auto}.c-layout-nav{border-right:2px solid #eaecef;max-width:300px;min-width:200px}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}*{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;margin:0;outline:0;padding:0}body,html{font-family:Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}p{line-height:1.5}a{color:#2c3e50;text-decoration:none}a:hover{text-decoration:underline}.page{padding-top:48px}.g-desc{color:#7f8fa4;font-size:14px}.icon-arrow{border-color:transparent transparent transparent blue;border-style:solid;border-width:44.5px 0 44.5px 118px;height:0;width:0}.icon-font{fill:currentColor;overflow:hidden;vertical-align:-.15em}.page-home-excerpt{background-color:#9cc;border:1px solid transparent;border-radius:6px;margin-bottom:24px;padding:16px}.page-home-excerpt-header{margin-bottom:4px}.page-home-excerpt-header-title{font-size:18px;font-weight:700}.page-home-excerpt-header-desc{color:#7f8fa4;font-size:14px;margin-left:8px}.page-home-excerpt-text{font-size:16px}.page-article-template .article-title-wrap{border-left:2px solid #eaecef;min-width:10%}.page-article-template .article-title-list{padding:16px;position:-webkit-sticky;position:sticky;top:48px}.page-article-template .article-title-list li{cursor:pointer;list-style:none;margin-bottom:12px}.page-article-template .article-title-list li:hover{color:#3eaf7c;text-decoration:underline}.article-wrap{padding:0 32px 0 64px}.article-wrap h1{font-size:16px}.article-wrap h2,.article-wrap h3,.article-wrap h4,.article-wrap h5,.article-wrap h6{font-size:18px;margin:16px 0}.article-wrap h2:before,.article-wrap h3:before,.article-wrap h4:before,.article-wrap h5:before,.article-wrap h6:before{color:blue;content:"#"}.article-wrap div,.article-wrap p{margin:8px 0}.article-wrap a{color:#0969da}.article-wrap>:not(ul){margin-left:-14px}.article-wrap li{margin:8px 0}.article-wrap li ol,.article-wrap li ul{margin-left:12px}.article-wrap ol{margin-left:3px}.article-wrap blockquote{background-color:#fff5e3;border-left:.25em solid #ffb11b;color:#57606a;padding-left:24px}.article-wrap blockquote>p{margin-left:-16px}.article-wrap code{background-color:#fff5e3;border-radius:2px;color:#9b6e23;margin:0 2px;padding:3px 5px;white-space:nowrap}.article-wrap img{box-shadow:0 0 80px -30px rgba(0,0,0,.5)!important}.article-wrap table{border-collapse:collapse;border-spacing:0}.article-wrap table td,.article-wrap table th{background-color:#1f2329;border-bottom:1px solid rgba(220,223,230,.3);border-right:1px solid rgba(220,223,230,.3);color:#fff;padding:8px 16px;text-align:left}</style></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="c-layout-wrap  page page-article-template"><header class="c-header"><a href="/">首页</a><a href="/">博客</a><a href="https://zlong1010.github.io/vue-components/#/" target="_blank" rel="noreferrer noopener">vue组件指令</a><a href="/debug/">Debug</a><a href="https://github.com/zlong1010" target="_blank" rel="noreferrer noopener"><svg class="icon-font" width="24px" height="24px" aria-hidden="true"><use href="#icon-font-github1"></use></svg></a></header><div class="c-layout-sidebar-content "><div class="c-layout-nav "><div class="c-nav"><div class="file-item fold false"><div class="file-name" role="button">网络</div><ul class="child-list"><a class="file-name false" href="/articles/网络/HTTP/">HTTP</a><a class="file-name false" href="/articles/网络/代理/">代理</a><a class="file-name false" href="/articles/网络/服务端/">服务端</a><a class="file-name false" href="/articles/网络/网络基础/">网络基础</a></ul></div><div class="file-item fold false"><div class="file-name" role="button">数据算法</div><ul class="child-list"><a class="file-name false" href="/articles/数据算法/数据结构基础/">数据结构基础</a></ul></div><div class="file-item fold false"><div class="file-name" role="button">博客</div><ul class="child-list"><a class="file-name false" href="/articles/博客/Gatsby建站/">Gatsby建站</a><a class="file-name false" href="/articles/博客/指南/">指南</a></ul></div><div class="file-item fold false"><div class="file-name" role="button">前端</div><ul class="child-list"><a class="file-name false" href="/articles/前端/webView/">webView</a><a class="file-name false" href="/articles/前端/前端调试/">前端调试</a><a class="file-name false" href="/articles/前端/前端资源整理/">前端资源整理</a><a class="file-name false" href="/articles/前端/总结/">总结</a><a class="file-name false" href="/articles/前端/浏览器/">浏览器</a><a class="file-name false" href="/articles/前端/练题/">练题</a><a class="file-name false" href="/articles/前端/规范/">规范</a><a class="file-name false" href="/articles/前端/设计模式/">设计模式</a><div class="file-item fold false"><div class="file-name" role="button">前端工程化</div><ul class="child-list"><a class="file-name false" href="/articles/前端/前端工程化/Babel/">Babel</a><a class="file-name false" href="/articles/前端/前端工程化/Gulp/">Gulp</a><a class="file-name false" href="/articles/前端/前端工程化/Webpack/">Webpack</a><a class="file-name false" href="/articles/前端/前端工程化/npm/">npm</a><a class="file-name false" href="/articles/前端/前端工程化/图标/">图标</a><a class="file-name false" href="/articles/前端/前端工程化/打包工具/">打包工具</a><a class="file-name false" href="/articles/前端/前端工程化/模块/">模块</a><a class="file-name false" href="/articles/前端/前端工程化/私有源/">私有源</a></ul></div><div class="file-item fold false"><div class="file-name" role="button">Node</div><ul class="child-list"><a class="file-name false" href="/articles/前端/Node/客户端-服务端/">客户端-服务端</a></ul></div><div class="file-item fold false"><div class="file-name" role="button">JS</div><ul class="child-list"><a class="file-name false" href="/articles/前端/JS/Ajax请求/">Ajax请求</a><a class="file-name false" href="/articles/前端/JS/ES6/">ES6</a><a class="file-name false" href="/articles/前端/JS/JS基础/">JS基础</a><a class="file-name false" href="/articles/前端/JS/总结/">总结</a></ul></div><div class="file-item fold false"><div class="file-name" role="button">HTML-CSS</div><ul class="child-list"><a class="file-name false" href="/articles/前端/HTML-CSS/CSS基础/">CSS基础</a><a class="file-name false" href="/articles/前端/HTML-CSS/HTML基础/">HTML基础</a><a class="file-name false" href="/articles/前端/HTML-CSS/总结/">总结</a></ul></div></ul></div><div class="file-item fold false"><div class="file-name" role="button">Vue</div><ul class="child-list"><a class="file-name false" href="/articles/Vue/PWA/">PWA</a><a class="file-name false" href="/articles/Vue/Vue原码解读/">Vue原码解读</a><a class="file-name false" href="/articles/Vue/Vue技术栈/">Vue技术栈</a><a class="file-name false" href="/articles/Vue/Vue视频资料/">Vue视频资料</a><a class="file-name false" href="/articles/Vue/vue基础概念/">vue基础概念</a><a class="file-name false" href="/articles/Vue/总结/">总结</a><a class="file-name false" href="/articles/Vue/服务端渲染/">服务端渲染</a></ul></div><div class="file-item fold false"><div class="file-name" role="button">React</div><ul class="child-list"><a class="file-name false" href="/articles/React/React基础/">React基础</a><a class="file-name false" href="/articles/React/React总结/">React总结</a><a class="file-name false" href="/articles/React/React技术栈/">React技术栈</a><a class="file-name false" href="/articles/React/TODO/">TODO</a></ul></div><a class="file-name false" href="/articles/Git/">Git</a><a class="file-name false" href="/articles/Linux命令/">Linux命令</a><a class="file-name false" href="/articles/TS基础/">TS基础</a><a class="file-name false" href="/articles/微前端/">微前端</a><a class="file-name false" href="/articles/爬虫/">爬虫</a></div></div><article class="article-wrap"><h1 id="t-0" >前端路由</h1>
<p>前端路由是通过改变URL，在不重新请求页面的情况下，更新页面视图。改变URL且不会重载页面的方式：hash &#x26; H5 history.pushState replaceState</p>
<blockquote>
<p>HashHistory</p>
</blockquote>
<ul>
<li>
<p>hash虽然出现在url中，但不会被包括在http请求中，它是用来指导浏览器动作的，对服务器端没影响，因此，改变hash不会重新加载页面。</p>
</li>
<li>
<p>可以为hash的改变添加监听事件：</p>
<p><code>window.addEventListener("hashchange",funcRef,false)</code></p>
</li>
</ul>
<blockquote>
<p>TML5History</p>
</blockquote>
<ul>
<li>pushState和replaceState两种方法的共同特点：当调用他们修改浏览器历史栈后，虽然当前url改变了，但浏览器不会立即发送请求该url，重载页面，这就为单页应用前端路由，更新视图但不重新请求页面提供了基础。</li>
<li>用户导航到新的状态，popstate事件就会被触发；</li>
</ul>
<h1 id="t-1" >长列表(Table)渲染优化</h1>
<blockquote>
<p>方案</p>
</blockquote>
<ol>
<li>虚拟列表：固定渲染一定数据的列表项</li>
</ol>
<p><a href="https://github.com/tangbc/vue-virtual-scroll-list">vue-virtual-scroll-list 组件</a>
<a href="https://github.com/bvaughn/react-virtualized">react-virtualized</a></p>
<ol start="2">
<li>懒加载</li>
</ol>
<h1 id="t-2" ><a href="https://juejin.cn/post/6844903885505576968">时区与JS中的Date</a></h1>
<h1 id="t-3" >跨域访问</h1>
<blockquote>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy">同源策略</a></p>
</blockquote>
<p>来源于某个 Origin 的 document(html) 或 脚本能否访问其他 Origin 的资源（localStoreage、Cookie、静态资源、xhr接口等）。</p>
<p>“同源” -- 两个源相同，哪两个源？脚本所在的源和脚本要访问的资源所在的源。</p>
<blockquote>
<p>跨域网络访问</p>
</blockquote>
<ol>
<li>静态资源访问</li>
<li>XMLHttpRequest 请求</li>
</ol>
<blockquote>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">跨域资源共享</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html">CORS-博客</a></p>
</blockquote>
<p>CORS is a part of <a href="https://developer.mozilla.org/en-US/docs/Glossary/HTTP">HTTP</a> that lets servers specify any other hosts from which a browser should permit loading of content.</p>
<p>出于安全性，浏览器限制脚本内发起的跨源 HTTP 请求。 例如，XMLHttpRequest 和 Fetch API 遵循同源策略。这意味着使用这些 API 的 Web 应用程序只能从加载应用程序的同一个域请求 HTTP 资源，除非响应报文包含了正确 CORS 响应头。</p>
<p>Web页面或应用部署(运行在A服务器/PC上)，用户浏览器请求A服务器上的页面进行访问，A服务器响应请求并返回页面，浏览器显示页面。</p>
<p>页面中的JS通过XMLHttpRequest请求A服务器上的数据时，浏览器不会阻止。但请求B服务器上(第三方)的数据时，浏览器会根据 B 服务器上的跨域配置判断是否运行当前页面获取资源。</p>
<p>浏览器安全策略会阻止该请求，B服务器甚至没有看到页面发出的请求。跨域是浏览器的限制，chrome 可以允许跨域，并且不需要修改服务端配置。</p>
<p>域名与对应的 ip之间通信也算跨域，因为一个ip对应的主机可以有多个网站，对应多个域名。</p>
<blockquote>
<p>相关的响应头部字段</p>
</blockquote>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cross-Origin_Resource_Policy_(CORP)">Corss-Origin-Resource-Policy</a> : 跨域策略，可选值为: <code>same-origin</code>、<code>same-site</code>、<code>cross-origin</code>
<ul>
<li>As this policy is expressed via a <em><a href="https://developer.mozilla.org/en-US/docs/Glossary/Response_header">response header</a></em>, the actual request is not prevented—rather, the browser prevents the <em>result</em> from being leaked by stripping the response body.</li>
<li>During a cross-origin resource policy check, if the header is set, the browser will deny <code>no-cors</code> requests issued from a different origin/site.</li>
</ul>
</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin">Access-Control-Allow-Origin</a>: 允许某个源或所有源访问
<ul>
<li>响应头部字段，标识 response 可以被哪些请求所在 Origin 访问。</li>
<li>服务端收到请求时，检查 request header 的 Origin, 如果允许该 Origin，则设置响应中的 Access-Control-Allow-Origin 值为该请求的 Origin。</li>
<li>请求中没有 <code>credentials</code> 字段时，服务端响应的 <code>Access-Control-Allow-Origin: *</code> 才有效。</li>
<li>当请求是 <code>credentialed requests</code> 时，服务端必须指定 <code>Access-Control-Allow-Origin</code> 的值为 <code>*</code> 之外的明确值。</li>
<li>如果服务端指定了具体的域名而非“*”，那么响应首部中的 Vary 字段的值必须包含 Origin。这将告诉客户端：服务器对不同的源站返回不同的内容。</li>
</ul>
</li>
<li>Access-Control-Allow-Credentials
<ul>
<li>将 XMLHttpRequest 的 withCredentials 标志设置为 true，从而向服务器发送 Cookies。如果服务器端的响应中未携带 <code>Access-Control-Allow-Credentials: true</code>，浏览器将不会把响应内容返回给请求的发送者。</li>
</ul>
</li>
</ul>
<blockquote>
<p>实际测试</p>
</blockquote>
<ul>
<li>正常的浏览器
<ul>
<li>【http-http】用 XSwitch 可以成功将一个 <a href="http://serve-a/x.js">http://serve-a/x.js</a> 资源重定向到公网的 <a href="http://serve-b/x.js">http://serve-b/x.js</a> 上，并且 <code>serve-b/x.js</code> 设置了 <code>Corss-Origin-Resource-Policy: same-origin</code>，但是不能重定向到本地的 Js 文件。</li>
<li>【https-http】用 XSwitch 不能将 <a href="https://serve-a/x.js">https://serve-a/x.js</a> 资源重定向到公网的 <a href="http://serve-b/x.js">http://serve-b/x.js</a> 上，报错为：<code>This request has been blocked; the content must be served over HTTPS.</code>。</li>
<li>【https-https】若 <a href="https://serve-b/x.js">https://serve-b/x.js</a> 没有配置跨域的响应头部，XSwitch 可以将 <a href="https://serve-a/x.js">https://serve-a/x.js</a> 可以重定向到 <a href="https://serve-b/x.js">https://serve-b/x.js</a></li>
</ul>
</li>
<li>命令行启动浏览器并允许跨域
<ul>
<li>【https-http】用 XSwitch 可以将 <a href="https://serve-a/x.js">https://serve-a/x.js</a> 资源重定向到本地的 <a href="http://127.0.0.1:9001/x.js">http://127.0.0.1:9001/x.js</a> 上</li>
</ul>
</li>
</ul>
<p><code>Access-Control-Allow-Headers: 'Origin, X-Requested-With, Content-Type, Accept'</code></p>
<blockquote>
<p>正常浏览器测试场景</p>
</blockquote>
<p><strong>(1).</strong> nginx 没有配置跨域相关的 header</p>
<ul>
<li>公网 139.xx 服务获取 <a href="http://127.0.0.1:123/demo.js">http://127.0.0.1:123/demo.js</a> （失败，报错"CORS"，用命令行启动浏览器可以解决）</li>
<li>公网 139.xx 服务获取 <a href="http://47.xx:8010/demo.js">http://47.xx:8010/demo.js</a>  <strong>（成功）</strong></li>
<li>127 服务获取公网 <a href="http://139.xx.xx/demo.js">http://139.xx.xx/demo.js</a> （成功）</li>
<li>test.dev.host 服务获取 <a href="http://139.xx.xx/demo.js">http://139.xx.xx/demo.js</a>   test.dev.host 解析到127（成功）</li>
<li>总结
<ul>
<li>本地127 或配置域名的 web 服务可以获取其他公网上的 Js 文件，公网不能获取本地 Js 文件，但另一位公网 Nginx 没有配置CORS时，从一个公网可以访问另一个公网的 Js 文件。</li>
<li>一个公网访问跨域获取另一个公网服务商的图像</li>
</ul>
</li>
</ul>
<p><strong>(2).</strong> nginx 配置跨域相关的 header</p>
<p>只配置 <code>Corss-Origin-Resource-Policy: same-origin</code> 没什么变化</p>
<blockquote>
<p>解决方案</p>
</blockquote>
<ol>
<li>JSONP：Js 文件可以跨域访问。通过动态创建 script，再请求一个带参网址实现跨域通信，通过 <code>&#x3C;script></code> 标签，在 url 中指定 callback 回调函数，当响应到来时调用回调函数，数据就是传递给回调函数的实参。</li>
</ol>
<deckgo-highlight-code language="js" terminal="carbon" theme="blackboard"  >
          <code slot="code">function handle(response){
  console.log(response);
}
let script = document.createElement(&#39;script&#39;);
script.src = &#39;http://xxx.com/?callback=handle&#39;;
document.body.insertBefore(script, docuent.body.firstChild);</code>
        </deckgo-highlight-code>
<p>缺点：只支持 GET请求</p>
<ol start="2">
<li>
<p>CORS：跨域资源共享(Cross-origin resource sharing)，服务端设置 Access-Control-Allow-Origin 即可，前端无须设置，若要带 cookie 请求，前后端都需要设置。
CORS 支持所有类型的请求方法；</p>
</li>
<li>
<p>postMessage 跨域：可以跨域操作的window属性之一，配合 iframe。</p>
</li>
<li>
<p>代理跨域：起一个代理服务器，实现数据的转发；</p>
</li>
<li>
<p>document.domain + iframe 跨域：两个页面都通过 JS 强制设置 document.domain 为基础主域，就实现了同域。
只支持主域相同，子域不同；</p>
</li>
<li>
<p>location.hash + iframe 跨域：a欲与b跨域相互通信，通过中间页c来实现。 三个页面，不同域之间利用 iframe 的 location.hash传值，相同域之间直接js访问来通信。</p>
</li>
<li>
<p>window.name + iframe 跨域：通过 iframe 的 src 属性由外域转向本地域，跨域数据即由 iframe 的 window.name 从外域传递到本地域。</p>
</li>
</ol>
<blockquote>
<p>参考</p>
</blockquote>
<ul>
<li><a href="https://juejin.im/entry/59feae9df265da43094488f6">跨域，你需要知道的全在这里</a></li>
<li><a href="https://www.ruanyifeng.com/blog/2016/04/cors.html">跨域资源共享 CORS 详解 - 阮一峰的网络日志</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html">浏览器同源策略-postMessage</a></li>
<li><a href="https://harttle.land/2016/12/28/cors-with-cookie.html#">CORS 跨域发送 cookie</a>
<ol>
<li>客服端：withCredentials=true;</li>
<li>服务端：Access-Control-Allow-Credentials=true; Access-Control-Allow-Origin: 单一域名</li>
</ol>
</li>
</ul>
<deckgo-highlight-code language="js" terminal="carbon" theme="blackboard"  >
          <code slot="code">access-control-allow-credentials: true
access-control-allow-headers: Content-Type
access-control-allow-origin: https://127.0.0.1:8087</code>
        </deckgo-highlight-code>
<h1 id="t-4" ><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies">cookie</a></h1>
<h1 id="t-5" ><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API">Web Storage</a></h1>
<blockquote>
<p>Web 全局存储、通信</p>
</blockquote>
<h1 id="t-6" ><a href="https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events">自定义事件</a></h1>
<blockquote>
<p>postMessage  CustomEvent  initEvent</p>
</blockquote>
<h1 id="t-7" >拖拽</h1>
<ul>
<li>
<p><a href="https://juejin.im/post/6844903940706795533">使用原生 JavaScript 实现拖放功能 - 掘金</a>
<a href="https://mp.weixin.qq.com/s/4WLbV46MsDzlNWzzDep3Pw">原生JS快速实现拖放实例效果与解析</a>
<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_Drag_and_Drop_API">HTML 拖放 API-| MDN</a>
<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations">拖拽操作 - MDN</a></p>
</li>
<li>
<p>拖拽元素</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="blackboard"  >
          <code slot="code">function makeElMavable(el: HTMLElement) {
  function getStyleVal(xy: &#39;x&#39; | &#39;y&#39;) {
    const s = xy === &#39;x&#39; ? el.style.left : el.style.top;
    const v = parseInt(s.replace(/\D/, &#39;&#39;));
    return v || 0;
  }
  
  let startX = 0;
  let startY = 0;
  let touchStartX = 0;
  let touchStartY = 0;
  
  const docMoveListener = (evt: TouchEvent) =&gt; {
    const tch = evt.touches[0];
    const dx = tch.screenX - touchStartX;
    const dy = tch.screenY - touchStartY;
    el.style.left = Math.round(startX + dx) + &#39;px&#39;;
    el.style.top = Math.round(startY + dy) + &#39;px&#39;;
  };
  
  el.addEventListener(&#39;touchstart&#39;, (evt: TouchEvent) =&gt; {
    const tch = evt.touches[0];
    startX = getStyleVal(&#39;x&#39;);
    startY = getStyleVal(&#39;y&#39;);
    touchStartX = tch.screenX;
    touchStartY = tch.screenY;
    document.addEventListener(&#39;touchmove&#39;, docMoveListener);
  });
  el.addEventListener(&#39;touchmove&#39;, (evt) =&gt; {
    evt.preventDefault();
  });
  el.addEventListener(&#39;touchend&#39;, () =&gt; {
    document.removeEventListener(&#39;touchmove&#39;, docMoveListener);
  });
  el.addEventListener(&#39;touchcancel&#39;, () =&gt; {
    document.removeEventListener(&#39;touchmove&#39;, docMoveListener);
  });
}</code>
        </deckgo-highlight-code>
</li>
</ul>
<h1 id="t-8" >捕获异步错误</h1>
<p><a href="https://juejin.im/post/6844903830409183239#heading-4">https://juejin.im/post/6844903830409183239#heading-4</a></p>
<p>Promise 中 throw 的错误，无论是在构造函数中的同步代码还是在 then 回调中的异步代码都只能被 promise.catch 捕获，不能被外层的 <code>try-catch</code> 捕获。</p>
<p>reject 返回的错误也只能被 promise.catch 捕获。</p>
<p>总之：promise 会吞掉自身产生的错误，只能通过 promise.catch 捕获这些错误。</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="blackboard"  >
          <code slot="code">const promiseFetch = () =&gt; {
  return new Promise(reslove =&gt; {
    throw new Error(&#39;promise 同步&#39;);
    // reslove();
  });
};

function main() {
  try {
    promiseFetch().then(() =&gt; {
      // throw new Error(&quot;promise.then 异步&quot;); // 只能被promise.catch 捕获
    }).catch(e =&gt; {
      console.debug(&#39;promise.catch e:&#39;, e);
    });
  } catch (e) {
    console.debug(&#39;try-catch e:&#39;, e);
  }
}

main();
</code>
        </deckgo-highlight-code>
<h3 id="t-9" >利用Promise捕获异步错误</h3>
<blockquote>
<p>当异步代码发生错误时，通过 reject 抛出错误，然后用 promise.catch 捕获错误。</p>
</blockquote>
<deckgo-highlight-code language="js" terminal="carbon" theme="blackboard"  >
          <code slot="code">const p3 = () =&gt;  new Promise((reslove, reject) =&gt; {
  setTimeout(() =&gt; {
    reject(&#39;async error&#39;);
  })
});

p3().catch(e =&gt; console.log(e));</code>
        </deckgo-highlight-code>
<h1 id="t-10" >搜索高亮</h1>
<blockquote>
<p><a href="https://www.zhangxinxu.com/wordpress/2010/06/%E7%BA%AF%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%A1%B5%E9%9D%A2%E5%85%B3%E9%94%AE%E5%AD%97%E6%90%9C%E7%B4%A2%E9%AB%98%E4%BA%AEjquery%E6%8F%92%E4%BB%B6/">纯客户端页面关键字搜索高亮jQuery插件</a></p>
<p><a href="https://juejin.cn/post/6844903747944972295#apply">单关键词、多关键词、多组多关键词</a></p>
</blockquote>
<p><a href="https://stackoverflow.com/questions/46232980/click-giving-access-denied-in-ie11">IE 链接下载失效</a></p>
<h1 id="t-11" >移动端</h1>
<h2 id="t-12" >设备检测</h2>
<ul>
<li>是否是移动端</li>
</ul>
<deckgo-highlight-code language="js" terminal="carbon" theme="blackboard"  >
          <code slot="code">isTouch = &quot;ontouchstart&quot; in window || navigator.msMaxTouchPoints;

const touchSupported = () =&gt; {
  return !!(&#39;ontouchstart&#39; in window || window.DocumentTouch &amp;&amp; document instanceof window.DocumentTouch);
}</code>
        </deckgo-highlight-code>
<p><a href="https://github.com/matthewhudson/current-device">current-device</a></p>
<p><a href="https://github.com/etienne-martin/device-detector-js">device-detector-js</a></p>
<p><a href="https://www.ruanyifeng.com/blog/2021/09/detecting-mobile-browser.html">移动端检测方法</a></p>
<h1 id="t-13" >链接</h1>
<ul>
<li><a href="https://github.com/YvetteLau/Step-By-Step/issues/26">异步加载js脚本的方法</a></li>
</ul>
<h1 id="t-14" ><a href="https://mp.weixin.qq.com/s/fepgCR4hikmMwIG3Fbb9gQ">时间国际化-格式化</a></h1>
<h1 id="t-15" >可视化</h1>
<ul>
<li><a href="https://antv.vision/zh/">数据可视化 拓扑图</a></li>
</ul></article><div class="article-title-wrap"><ul class="article-title-list"><li data-id="0"></li><li data-id="1"></li><li data-id="2"></li><li data-id="3"></li><li data-id="4"></li><li data-id="5"></li><li data-id="6"></li><li data-id="7"></li><li data-id="8"></li><li data-id="9"></li><li data-id="10"></li><li data-id="11"></li><li data-id="12"></li><li data-id="13"></li><li data-id="14"></li><li data-id="15"></li></ul></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/前端/总结/";window.___webpackCompilationHash="c49094a84b75300a7995";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-685382d79227ba8c6c0a.js"],"app":["/app-7d3e9abae18ec1f8887c.js"],"component---src-pages-404-js":["/component---src-pages-404-js-a1cb840e6fe8c403c00b.js"],"component---src-pages-debug-jsx":["/component---src-pages-debug-jsx-19f27fb8a0713cec9f30.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-80609875fb336e50372b.js"],"component---src-pages-other-js":["/component---src-pages-other-js-9c6c2b81a35ac0392fee.js"],"component---src-pages-repos-jsx":["/component---src-pages-repos-jsx-dee454af7a306b8cd264.js"],"component---src-templates-post-js":["/component---src-templates-post-js-61d755257a9553237b83.js"]};/*]]>*/</script><script src="/polyfill-685382d79227ba8c6c0a.js" nomodule=""></script><script src="/app-7d3e9abae18ec1f8887c.js" async=""></script><script src="/framework-f8624ff623718a95a8e7.js" async=""></script><script src="/webpack-runtime-2b808e64ecb478a083ab.js" async=""></script></body></html>